<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Router Layer Processing</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #111827;
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 40px 20px;
        }
        .container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 40px;
            max-width: 900px;
            width: 100%;
        }
        h1 {
            text-align: center;
            color: #e0e7ff;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        .subtitle {
            text-align: center;
            color: rgba(255,255,255,0.5);
            font-size: 12px;
            margin-bottom: 32px;
        }
        .flow {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 20px;
            margin-bottom: 32px;
        }
        .device {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
        }
        .device-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        .device-icon.client {
            background: linear-gradient(135deg, #312e81 0%, #4338ca 100%);
            border: 1px solid rgba(165, 180, 252, 0.3);
        }
        .device-icon.router {
            background: linear-gradient(135deg, #713f12 0%, #a16207 100%);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        .device-icon.server {
            background: linear-gradient(135deg, #14532d 0%, #15803d 100%);
            border: 1px solid rgba(134, 239, 172, 0.3);
        }
        .device-name {
            color: #e0e7ff;
            font-size: 14px;
            font-weight: 600;
        }
        .device-ip {
            color: rgba(255,255,255,0.4);
            font-size: 11px;
        }
        .arrow-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
        }
        .arrow-svg {
            width: 80px;
            height: 20px;
        }
        .packet-box {
            background: rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            width: 100%;
        }
        .packet-title {
            font-size: 9px;
            color: rgba(255,255,255,0.4);
            margin-bottom: 8px;
            text-align: center;
        }
        .packet-row {
            display: flex;
            gap: 4px;
            margin-bottom: 4px;
        }
        .packet-header {
            padding: 8px 10px;
            border-radius: 4px;
            font-size: 11px;
            color: #e0e7ff;
            text-align: center;
            flex: 1;
        }
        .header-l2 {
            background: linear-gradient(135deg, #1e3a5f 0%, #1d4ed8 100%);
            border: 1px solid rgba(147, 197, 253, 0.3);
        }
        .header-l3 {
            background: linear-gradient(135deg, #713f12 0%, #a16207 100%);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }
        .header-l4 {
            background: linear-gradient(135deg, #14532d 0%, #15803d 100%);
            border: 1px solid rgba(134, 239, 172, 0.3);
        }
        .header-l7 {
            background: linear-gradient(135deg, #312e81 0%, #4338ca 100%);
            border: 1px solid rgba(165, 180, 252, 0.3);
        }
        .header-changed {
            box-shadow: 0 0 0 2px rgba(251, 191, 36, 0.5);
        }
        .divider {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 24px 0;
        }
        .divider-line {
            flex: 1;
            height: 1px;
            background: rgba(255,255,255,0.1);
        }
        .divider-text {
            color: rgba(255,255,255,0.4);
            font-size: 11px;
        }
        .info {
            padding: 16px;
            background: rgba(255,255,255,0.02);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.06);
        }
        .info-title {
            color: rgba(255,255,255,0.6);
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        .info-row {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: rgba(255,255,255,0.5);
            margin-bottom: 8px;
        }
        .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        .dot.blue { background: #93c5fd; }
        .dot.orange { background: #fbbf24; }
        .dot.green { background: #86efac; }
        .highlight { color: #fbbf24; font-weight: 600; }
        .key-insight {
            margin-top: 16px;
            padding: 14px;
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 8px;
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            text-align: center;
        }
        .layer-table {
            width: 100%;
            margin-top: 16px;
            border-collapse: collapse;
        }
        .layer-table th, .layer-table td {
            padding: 10px 14px;
            font-size: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }
        .layer-table th {
            color: rgba(255,255,255,0.4);
            font-weight: 600;
        }
        .layer-table td {
            color: rgba(255,255,255,0.6);
        }
        .unchanged { color: #86efac; }
        .changed { color: #fbbf24; }
    </style>
</head>
<body>
<div class="container">
    <h1>라우터는 L3까지만 본다</h1>
    <p class="subtitle">라우터는 IP 주소만 확인하고, 포트 번호(L4)는 보지 않는다</p>

    <div class="flow">
        <div class="device">
            <div class="device-icon client">PC</div>
            <span class="device-name">Client</span>
            <span class="device-ip">192.168.1.10</span>
            <span class="device-ip">MAC: AA:AA</span>

            <div class="packet-box">
                <div class="packet-title">보내는 패킷</div>
                <div class="packet-row">
                    <div class="packet-header header-l2">L2: AA:AA → <span class="highlight">BB:BB</span></div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l3">L3: 192.168.1.10 → 10.0.0.5</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l4">L4: 50000 → 8080</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l7">L7: HTTP Data</div>
                </div>
            </div>
        </div>

        <div class="arrow-section">
            <svg class="arrow-svg" viewBox="0 0 80 20">
                <line x1="0" y1="10" x2="70" y2="10" stroke="rgba(147,197,253,0.5)" stroke-width="2"/>
                <polygon points="70,6 80,10 70,14" fill="rgba(147,197,253,0.5)"/>
            </svg>
        </div>

        <div class="device">
            <div class="device-icon router">R</div>
            <span class="device-name">Router</span>
            <span class="device-ip">게이트웨이</span>
            <span class="device-ip">MAC: BB:BB</span>

            <div class="packet-box">
                <div class="packet-title">라우터가 보는 것 (L3까지)</div>
                <div class="packet-row">
                    <div class="packet-header header-l2 header-changed">L2: BB:BB → <span class="highlight">CC:CC</span></div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l3">L3: 192.168.1.10 → 10.0.0.5</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l4" style="opacity: 0.3;">L4: (안 봄)</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l7" style="opacity: 0.3;">L7: (안 봄)</div>
                </div>
            </div>
        </div>

        <div class="arrow-section">
            <svg class="arrow-svg" viewBox="0 0 80 20">
                <line x1="0" y1="10" x2="70" y2="10" stroke="rgba(134,239,172,0.5)" stroke-width="2"/>
                <polygon points="70,6 80,10 70,14" fill="rgba(134,239,172,0.5)"/>
            </svg>
        </div>

        <div class="device">
            <div class="device-icon server">S</div>
            <span class="device-name">Server</span>
            <span class="device-ip">10.0.0.5</span>
            <span class="device-ip">MAC: CC:CC</span>

            <div class="packet-box">
                <div class="packet-title">서버가 받는 패킷</div>
                <div class="packet-row">
                    <div class="packet-header header-l2">L2: BB:BB → CC:CC</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l3">L3: 192.168.1.10 → 10.0.0.5</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l4">L4: 50000 → 8080</div>
                </div>
                <div class="packet-row">
                    <div class="packet-header header-l7">L7: HTTP Data</div>
                </div>
            </div>
        </div>
    </div>

    <div class="key-insight">
        <strong>MAC 주소만 바뀜</strong>: AA:AA → BB:BB (클라이언트→라우터) 에서 BB:BB → CC:CC (라우터→서버)로 변경<br>
        <strong>IP, 포트, 데이터는 그대로</strong>: 라우터는 L3(IP)만 보고 방향 결정
    </div>

    <div class="divider">
        <div class="divider-line"></div>
        <span class="divider-text">스위치 vs 라우터</span>
        <div class="divider-line"></div>
    </div>

    <div class="info">
        <div class="info-title">스위치 (L2) - 같은 네트워크 내 전달</div>
        <div class="info-row">
            <div class="dot blue"></div>
            <span><strong>MAC 주소</strong>를 보고 "이 MAC은 3번 포트에 연결됨" → 3번 포트로만 전송</span>
        </div>
        <div class="info-row">
            <div class="dot blue"></div>
            <span>같은 네트워크(같은 서브넷) 안에서만 동작</span>
        </div>
        <div class="info-row">
            <div class="dot blue"></div>
            <span>비유: 아파트 내 우편함 분류 (같은 건물 안에서)</span>
        </div>
    </div>

    <div class="info" style="margin-top: 12px;">
        <div class="info-title">라우터 (L3) - 다른 네트워크로 전달</div>
        <div class="info-row">
            <div class="dot orange"></div>
            <span><strong>IP 주소</strong>를 보고 "이 IP는 외부 네트워크다" → 다음 라우터 방향으로 전송</span>
        </div>
        <div class="info-row">
            <div class="dot orange"></div>
            <span>MAC 주소를 변경해서 다음 hop으로 전달</span>
        </div>
        <div class="info-row">
            <div class="dot orange"></div>
            <span>비유: 다른 도시로 택배 발송 (물류센터 경유)</span>
        </div>
    </div>

    <div class="divider">
        <div class="divider-line"></div>
        <span class="divider-text">각 장비가 보는 계층</span>
        <div class="divider-line"></div>
    </div>

    <div class="info">
        <table class="layer-table">
            <tr>
                <th>장비</th>
                <th>동작 계층</th>
                <th>확인하는 정보</th>
                <th>역할</th>
            </tr>
            <tr>
                <td>허브</td>
                <td>L1</td>
                <td>없음 (전기 신호만)</td>
                <td>모든 포트로 복제</td>
            </tr>
            <tr>
                <td>스위치</td>
                <td>L2</td>
                <td>MAC 주소</td>
                <td>같은 네트워크 내 전달</td>
            </tr>
            <tr>
                <td>라우터</td>
                <td>L3</td>
                <td>IP 주소</td>
                <td>다른 네트워크로 경로 결정</td>
            </tr>
            <tr>
                <td>방화벽/LB</td>
                <td>L4~L7</td>
                <td>포트, HTTP 내용</td>
                <td>필터링, 분산</td>
            </tr>
        </table>
    </div>

    <div class="info" style="margin-top: 16px;">
        <div class="info-title">패킷 전송 중 변하는 것 vs 안 변하는 것</div>
        <div class="info-row">
            <div class="dot orange"></div>
            <span><strong class="changed">MAC 주소 (L2)</strong>: 라우터 거칠 때마다 변경 (다음 hop 주소)</span>
        </div>
        <div class="info-row">
            <div class="dot green"></div>
            <span><strong class="unchanged">IP 주소 (L3)</strong>: 출발지~목적지까지 변하지 않음</span>
        </div>
        <div class="info-row">
            <div class="dot green"></div>
            <span><strong class="unchanged">포트 번호 (L4)</strong>: 변하지 않음, 라우터는 보지도 않음</span>
        </div>
        <div class="info-row">
            <div class="dot green"></div>
            <span><strong class="unchanged">HTTP 데이터 (L7)</strong>: 변하지 않음</span>
        </div>
    </div>
</div>
</body>
</html>
