<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>동적 Slave 관리</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white p-8">
    <div class="max-w-4xl mx-auto">
        <svg viewBox="0 0 1000 500" class="w-full">
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280" />
                </marker>
            </defs>

            <!-- 배경 -->
            <rect x="0" y="0" width="1000" height="500" fill="#f8fafc" rx="12"/>

            <!-- 제목 -->
            <text x="500" y="45" text-anchor="middle" font-size="24" font-weight="bold" fill="#1e293b">동적 Slave 관리</text>

            <!-- T1 -->
            <g transform="translate(30, 80)">
                <!-- 시간 뱃지 -->
                <rect x="0" y="0" width="50" height="32" fill="#0f172a" rx="6"/>
                <text x="25" y="22" text-anchor="middle" font-size="14" font-weight="bold" fill="#38bdf8">T1</text>

                <!-- 상태 -->
                <rect x="70" y="0" width="200" height="32" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1" rx="6"/>
                <text x="170" y="22" text-anchor="middle" font-size="13" fill="#475569">Slave2 복제 지연 5초</text>

                <!-- 화살표 -->
                <line x1="280" y1="16" x2="310" y2="16" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>

                <!-- 임계치 초과 뱃지 -->
                <rect x="320" y="0" width="140" height="32" fill="#fef2f2" stroke="#fca5a5" stroke-width="2" rx="16"/>
                <text x="390" y="22" text-anchor="middle" font-size="12" font-weight="600" fill="#dc2626">임계치(3초) 초과</text>

                <!-- 화살표 -->
                <line x1="470" y1="16" x2="500" y2="16" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>

                <!-- 결과 -->
                <rect x="510" y="0" width="120" height="32" fill="#fef2f2" rx="6"/>
                <rect x="510" y="0" width="4" height="32" fill="#ef4444" rx="2"/>
                <text x="575" y="22" text-anchor="middle" font-size="13" font-weight="600" fill="#dc2626">라우팅 제외</text>
            </g>

            <!-- T2 -->
            <g transform="translate(30, 200)">
                <!-- 시간 뱃지 -->
                <rect x="0" y="0" width="50" height="32" fill="#0f172a" rx="6"/>
                <text x="25" y="22" text-anchor="middle" font-size="14" font-weight="bold" fill="#fbbf24">T2</text>

                <!-- 상태 -->
                <rect x="70" y="0" width="280" height="32" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1" rx="6"/>
                <text x="210" y="22" text-anchor="middle" font-size="13" fill="#475569">Slave2가 복제 따라잡는 중...</text>

                <!-- 화살표 -->
                <line x1="360" y1="16" x2="390" y2="16" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>

                <!-- 결과 -->
                <rect x="400" y="0" width="80" height="32" fill="#fef3c7" rx="6"/>
                <rect x="400" y="0" width="4" height="32" fill="#f59e0b" rx="2"/>
                <text x="445" y="22" text-anchor="middle" font-size="13" font-weight="600" fill="#d97706">대기</text>
            </g>

            <!-- T3 -->
            <g transform="translate(30, 320)">
                <!-- 시간 뱃지 -->
                <rect x="0" y="0" width="50" height="32" fill="#0f172a" rx="6"/>
                <text x="25" y="22" text-anchor="middle" font-size="14" font-weight="bold" fill="#4ade80">T3</text>

                <!-- 상태 -->
                <rect x="70" y="0" width="200" height="32" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1" rx="6"/>
                <text x="170" y="22" text-anchor="middle" font-size="13" fill="#475569">Slave2 복제 지연 1초</text>

                <!-- 화살표 -->
                <line x1="280" y1="16" x2="310" y2="16" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>

                <!-- 임계치 이하 뱃지 -->
                <rect x="320" y="0" width="110" height="32" fill="#f0fdf4" stroke="#86efac" stroke-width="2" rx="16"/>
                <text x="375" y="22" text-anchor="middle" font-size="12" font-weight="600" fill="#16a34a">임계치 이하</text>

                <!-- 화살표 -->
                <line x1="440" y1="16" x2="470" y2="16" stroke="#6b7280" stroke-width="2" marker-end="url(#arrowhead)"/>

                <!-- 결과 -->
                <rect x="480" y="0" width="170" height="32" fill="#f0fdf4" rx="6"/>
                <rect x="480" y="0" width="4" height="32" fill="#22c55e" rx="2"/>
                <text x="570" y="22" text-anchor="middle" font-size="13" font-weight="600" fill="#16a34a">다시 라우팅에 포함</text>
            </g>

            <!-- 하단 설명 박스 -->
            <rect x="30" y="420" width="940" height="60" fill="#f0f9ff" stroke="#38bdf8" stroke-width="2" rx="8"/>
            <rect x="30" y="420" width="6" height="60" fill="#0ea5e9" rx="3"/>
            <text x="55" y="455" font-size="14" fill="#64748b">
                <tspan font-weight="bold" fill="#0284c7">ProxySQL</tspan>
                <tspan>이 주기적으로 각 Slave의 </tspan>
                <tspan font-family="monospace" fill="#0f172a">Seconds_Behind_Master</tspan>
                <tspan>를 체크하여 상태에 따라 동적으로 포함/제외합니다.</tspan>
            </text>
        </svg>
    </div>
</body>
</html>
