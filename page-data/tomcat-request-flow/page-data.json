{"componentChunkName":"component---src-templates-blog-post-js","path":"/tomcat-request-flow/","result":{"data":{"site":{"siteMetadata":{"title":"GoToBill"}},"markdownRemark":{"id":"47a23bca-623c-5770-90cf-f7843bed9763","excerpt":"요청 처리 전체 흐름 클라이언트 요청이 Tomcat을 거쳐 Servlet까지 도달하는 과정을 알아봅니다.  처리 단계별 설명 단계 컴포넌트 역할 1 Connector 소켓 연결 수락, HTTP 파싱 2 Engine Host 헤더로 가상 호스트 결정 3 Host URL…","html":"<h2>요청 처리 전체 흐름</h2>\n<p>클라이언트 요청이 Tomcat을 거쳐 Servlet까지 도달하는 과정을 알아봅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/7f2ab/tomcatRequest.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.822784810126581%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0klEQVR42hWPy06DQAAA+w0emljaLuyDsrDLw0KQQmO91apNvGliNJ70okevnox/4O+OeJ/MZCbLpcP5gVlguWtDPo8CryQu+6Crf5gvBmT3htp8MQ07Tm/eOdm/Es16nqpfjvabaZIQPg/M9w0TIXK87xHCUduY296RqBQlDxT+ESlbhL1CFw+YdCBYHwjqa5zdsbUv1PqeOG/Rlx3ibP0vdKTZOVpXBIsctdqgTT0GLDouSJKGKMwwqiAfT4wsiKOSstqNbImQHu8uSOMeEzX8AY1XXpMKleVMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"톰캣 리퀘스트 과정\"\n        title=\"\"\n        src=\"/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/f058b/tomcatRequest.png\"\n        srcset=\"/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/c26ae/tomcatRequest.png 158w,\n/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/6bdcf/tomcatRequest.png 315w,\n/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/f058b/tomcatRequest.png 630w,\n/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/40601/tomcatRequest.png 945w,\n/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/78612/tomcatRequest.png 1260w,\n/static/5c0e4cfed79f21b9c42dc16c4fc1fd45/7f2ab/tomcatRequest.png 2236w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>처리 단계별 설명</h3>\n<table>\n<thead>\n<tr>\n<th>단계</th>\n<th>컴포넌트</th>\n<th>역할</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td><strong>Connector</strong></td>\n<td>소켓 연결 수락, HTTP 파싱</td>\n</tr>\n<tr>\n<td>2</td>\n<td><strong>Engine</strong></td>\n<td>Host 헤더로 가상 호스트 결정</td>\n</tr>\n<tr>\n<td>3</td>\n<td><strong>Host</strong></td>\n<td>URL 경로로 Context 결정</td>\n</tr>\n<tr>\n<td>4</td>\n<td><strong>Context</strong></td>\n<td>web.xml 기반 Wrapper 결정</td>\n</tr>\n<tr>\n<td>5</td>\n<td><strong>Wrapper</strong></td>\n<td>Filter 체인 실행 후 Servlet 호출</td>\n</tr>\n<tr>\n<td>6</td>\n<td><strong>Servlet</strong></td>\n<td>비즈니스 로직 처리, 응답 생성</td>\n</tr>\n</tbody>\n</table>\n<h2>Connector 내부 구조 (Coyote)</h2>\n<p>Connector는 단순히 요청을 받는 게 아닙니다. 내부적으로 세 가지 컴포넌트가 계층적으로 동작합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c131bf0fee83d3cafa8e3b12a009a0ce/c1bea/connectorStructure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAE7klEQVR42k2V2W9UdRTHJ1GBthAxnelsd+7sc2ft3Jm5s3empdiWLrS0RQi0FFlqsUBTEAVENgGpIELCEiXRSNIoBqMPxJi4PWnii6/+Ox/PvdMGHj7zO+feM9/f+Z3fmTM2lytKixhu9zqahccTJ5Np0NMYo7dvgly+H58vLe/ieL0JIfkSKQvbupjTGcG9Jt4SjFuByVTdEiqWhtBz/ahqt2z0QqBFGsVESbcEzUx8qvkgKWsGjzeOyy0beKI4XSG8iibExQ7LO4n3xl5aW3i9GopkbzN386v9hMM7CQVHiUZ2EYmMiT0k7CAcGiYSGhHGLKLhcWFC2EU4KLGhKWKRactX1Tw2n2JQK9+kr+ce23sfyPoII/uAcu4xldxXVPPfUCusCt9RN57RY/xEo/icZulnBpq/MdD4g5G+vxnu+52Av4HN6zUY3P6I2f3fs2f6qfBMhFepFJ5QM1ZF5Cn1oggVf6RREqHyL/SWf2Vb7U+G+/9i3+S/zB/4j6nhf+SkvdgURScefptkdIFE+Jisx8nEl8hoy8JpurUz6Ilz5JIXyMYviH2RXOIy+eRV9Pg1qvpNmsU7lLPX8fsrZoZJutQgdn8QV1AuIiQ3vU64tXq1BEo8Kb60VETaKSoXEdMsnJEYXYJLUP1ZbO5ACmVvicihJs79BTr36Thm8zgOFnAcMnAcNbDPF7EvlHAslnGcEJYqOE5VcZyu4Xm/SfjSIKGz21FiOWmbYILM4iADl+dILQ0RPt6H51iFzvk89ndF7ISILZWxLwuny3SeqWA/W8V+robzQpPsrUl6Hs6SWRnHo+ly5EAa+1AK+2ga17iOezKHc1Kna1p4K0fX3jyu/QbOGYOu2QLOA2IfNCmizteJLm4jutRPYL6BLyIZmh3u8qRwCi6xPb7ul8jiUbpRgwXUkGH5XlUXcij+vLW6fDpOuVi3kpVLkT50y4d9aAH3xDJvjJ6kffA47cNLbB49xeaxM3SMf0DHxDk6dn1I+9RHtE9fom33Fdr2fMzGvdfomLmJ/fBdHAdW8EZq2JwBg+DcFcqn76Mt3MY19wmOuRU27b3Oxn032TjzKRtnb7Nh7g4bDt7jtUP3efXIQ16Z/wL7qSekr/xA7sZzAme/xR3tkRoGDTqGFmkfWWbL+Hu8MXWOrVPnaZ88T8fUBTqmL9K+W7Lac5U2yWjTvhtsmlmRTW7RNvc5ne/cp2vxS7YeuotiCipKRn7UWRSzNj59rUY6HrWA28RXwOMv4Q2UxDeEkvhFfHIyX6CIIngDRcv2+wutxl4fQ4rgU0zSxAMyC6WR06EYupakkEiTlebNaxqZaAJVLs2vZtfQLVRVXxNUWrNM8bVmW0BNstzvYGXSzoMjKR4vpPj6eJonJ5OsHt3CZ3tel0nTLaOuJbKO36+3xpfLFZfhqlmD02wjVbIcK4aZaUaY7Y1weCDJ/FCcheEEJ0ejzPQGJE5izZYSIZ+UrCUofRjTSpQrA9TqI6TSdZmLeaFg1bM7t51s7k2pT8GqmRqUekldA+EK1doI2WwvkWiRWKxiEQ4b2JIi0ty2i57mTqr1Ucq1URn124iIaKU6LM/HqciXq2uYIslkjUbvBLWeMflr2EGlvpN6YwItLn1o7mBmFgrlZVIbRGOG7FYSvyABFSuDaLSEplWEsvXO9GOW/QJNq0qGJf4H1NLPxwY9/cgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"톰캣 커넥터\"\n        title=\"\"\n        src=\"/static/c131bf0fee83d3cafa8e3b12a009a0ce/f058b/connectorStructure.png\"\n        srcset=\"/static/c131bf0fee83d3cafa8e3b12a009a0ce/c26ae/connectorStructure.png 158w,\n/static/c131bf0fee83d3cafa8e3b12a009a0ce/6bdcf/connectorStructure.png 315w,\n/static/c131bf0fee83d3cafa8e3b12a009a0ce/f058b/connectorStructure.png 630w,\n/static/c131bf0fee83d3cafa8e3b12a009a0ce/40601/connectorStructure.png 945w,\n/static/c131bf0fee83d3cafa8e3b12a009a0ce/78612/connectorStructure.png 1260w,\n/static/c131bf0fee83d3cafa8e3b12a009a0ce/c1bea/connectorStructure.png 1388w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>ProtocolHandler</h3>\n<p>프로토콜별로 요청을 처리하는 최상위 컴포넌트입니다. <code class=\"language-text\">server.xml</code>에서 <code class=\"language-text\">protocol</code> 속성으로 지정합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.coyote.http11.Http11NioProtocol<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h3>Endpoint</h3>\n<p>Acceptor, Poller, Worker 스레드를 관리하는 주체입니다.</p>\n<p>소켓 레벨 I/O를 담당하며, <strong>NIO/NIO2/APR</strong> 중 어떤 방식으로 I/O를 처리할지 결정합니다.</p>\n<h3>Processor</h3>\n<p>HTTP 바이트 스트림을 파싱해서 Request/Response 객체를 생성합니다. 요청 처리 후 Keep-Alive 여부에 따라 소켓을 재사용할지 결정합니다.</p>\n<h2>NIO Thread 모델</h2>\n<p>Tomcat NIO는 세 종류의 스레드가 협력하여 요청을 처리합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c772de913e70350ba6b2cd259cc3983f/5fada/tomcatNio.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACgUlEQVR42mWUy27TQBSG8wYs2hJ7xvbYnnh8q++5uGnatBWhVLRICETFqntYsELiARB7FizgHRAvwXv9nLGdlKqLXxmPz/nmP+eMMzKMAFuZphoUoSjWKKs1bPsQRblGXV/QOkNJ66ahtZOBsQSWlQ467DTawQz1AOi6OTyvBOcxXC+HnJSUENNeBd+vu2TOH8L0gSPGIzjOYSfLSggWDurhjOl3LVyxpPc5PUek+JEzDeuAOpmxsAvcwrZJpinhuzd4dfUbb67/IvDf0Z5HgOwBTD/fA6lUQ5c7aAu3qFTOFDk7RVN+waL5Bs/dgFshLDt/5KxXrkumRCpVy7JT2kzBqDf74wR7JINpcABm+GBPJbgRkhTsAeY4+aCiUwe0O9DQRzpFigiXlY/XrUQxkRg7Dbz6En5zBX/2Es70Gtytd1DtTKsD3g+BSiUdGAmqiYsfdx7+fFZ4OzfwJH0BfvcV0YfvUJ9+Yv/jL4zTCzjk3ibIFtY77AbQD2Erz4mwTCXOC4lE0kFOBTNYYixbjINjjNUKtqj+K7kYVGKky3WcbCchyD4FHZgZ9oyMekitoESh20KHCZ7AIfWucoovOmmYQweP9Ph1/2x9FwVdBwJ46zkmtyuIzRTB7SmsZ1Oo9+fgz2dgZzXtnUFcLGBzgop7d0KQQ0ZfBevu3lCySVN16Y6pDNynISlyEFYQKQ0hKGBJ6llYwp4Uw0AIZvdQQW0YFeUKi3YDpaYIowVpjjAkh36D2WyDOGwRaakF4ngJ6U+RREc4OblBu7xCmq4QJ8vuV1HMKIpblPU5BR9BhT1Mg6VskNMfRFGdQcdEBNGJQTBHoOZI0uNeyTHt67UGtvgHFlyZGKv/OL8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tomcat nio\"\n        title=\"\"\n        src=\"/static/c772de913e70350ba6b2cd259cc3983f/f058b/tomcatNio.png\"\n        srcset=\"/static/c772de913e70350ba6b2cd259cc3983f/c26ae/tomcatNio.png 158w,\n/static/c772de913e70350ba6b2cd259cc3983f/6bdcf/tomcatNio.png 315w,\n/static/c772de913e70350ba6b2cd259cc3983f/f058b/tomcatNio.png 630w,\n/static/c772de913e70350ba6b2cd259cc3983f/40601/tomcatNio.png 945w,\n/static/c772de913e70350ba6b2cd259cc3983f/78612/tomcatNio.png 1260w,\n/static/c772de913e70350ba6b2cd259cc3983f/5fada/tomcatNio.png 1706w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Acceptor Thread</h3>\n<p>새로운 TCP 연결을 수락합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 의사 코드</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Acceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ServerSocketChannel</span> serverSocket<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 1. 새 연결 대기 (블로킹)</span>\n            <span class=\"token class-name\">SocketChannel</span> socket <span class=\"token operator\">=</span> serverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 2. Non-blocking 모드로 전환</span>\n            socket<span class=\"token punctuation\">.</span><span class=\"token function\">configureBlocking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 3. Poller에 등록 요청</span>\n            poller<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>특징</strong>:</p>\n<ul>\n<li>보통 1개로 충분 (accept()는 매우 빠름)</li>\n<li>병목 가능성 거의 없음</li>\n</ul>\n<h3>Poller Thread</h3>\n<p>I/O 이벤트를 감지하고 Worker에 작업을 할당합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 의사 코드</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Poller</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Selector</span> selector<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Queue</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">></span></span> registerQueue<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 1. 대기 중인 소켓 등록</span>\n            <span class=\"token function\">registerPending</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 2. I/O 이벤트 대기 (타임아웃: 1초)</span>\n            selector<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 3. 준비된 이벤트 처리</span>\n            <span class=\"token class-name\">Iterator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">SelectionKey</span><span class=\"token punctuation\">></span></span> keys <span class=\"token operator\">=</span> selector<span class=\"token punctuation\">.</span><span class=\"token function\">selectedKeys</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">iterator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>keys<span class=\"token punctuation\">.</span><span class=\"token function\">hasNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token class-name\">SelectionKey</span> key <span class=\"token operator\">=</span> keys<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                keys<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">.</span><span class=\"token function\">isReadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token comment\">// READ 이벤트: Worker Thread에 작업 위임</span>\n                    <span class=\"token class-name\">SocketChannel</span> socket <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">SocketChannel</span><span class=\"token punctuation\">)</span> key<span class=\"token punctuation\">.</span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    key<span class=\"token punctuation\">.</span><span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Selector에서 등록 해제 (Worker 처리 중 중복 감지 방지)</span>\n                    executor<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SocketProcessor</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>특징</strong>:</p>\n<ul>\n<li>CPU 코어 수에 따라 1-2개</li>\n<li>보통 1개로 수만 개 연결 처리 가능</li>\n<li>연결 수가 10만 이상이면 Poller 개수 증가 고려</li>\n</ul>\n<h3>Worker Thread</h3>\n<p>실제 요청을 처리합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 의사 코드</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">SocketProcessor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Runnable</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">SocketChannel</span> socket<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// 1. HTTP 파싱</span>\n            <span class=\"token class-name\">HttpRequest</span> request <span class=\"token operator\">=</span> <span class=\"token function\">parseHttpRequest</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">HttpResponse</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpResponse</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 2. Container Pipeline 실행</span>\n            <span class=\"token comment\">// Engine → Host → Context → Wrapper</span>\n            <span class=\"token function\">getContainer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 3. 응답 전송</span>\n            response<span class=\"token punctuation\">.</span><span class=\"token function\">finishResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">// 4. Keep-Alive 처리</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">isKeepAlive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                poller<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 다음 요청 대기</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                socket<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">handleError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Thread Pool 구조</h2>\n<h3>Thread Pool 설정</h3>\n<p>Tomcat의 기본값은 <code class=\"language-text\">maxThreads=200</code>, <code class=\"language-text\">minSpareThreads=10</code>입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Executor</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tomcatThreadPool<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">namePrefix</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>catalina-exec-<span class=\"token punctuation\">\"</span></span>\n          <span class=\"token attr-name\">maxThreads</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200<span class=\"token punctuation\">\"</span></span>          <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">최대</span> <span class=\"token attr-name\">스레드</span> <span class=\"token attr-name\">수</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n          minSpareThreads=\"10\"      <span class=\"token comment\">&lt;!-- 최소 유휴 스레드 --></span>\n          maxIdleTime=\"60000\"       <span class=\"token comment\">&lt;!-- 유휴 스레드 제거 시간 (ms) --></span>\n          prestartminSpareThreads=\"true\"  <span class=\"token comment\">&lt;!-- 시작 시 minSpareThreads 생성 --></span>\n          maxQueueSize=\"100\"        <span class=\"token comment\">&lt;!-- 작업 큐 크기 --></span>\n          />\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HTTP/1.1<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">executor</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tomcatThreadPool<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<h3>Thread 생성 순서 (Tomcat TaskQueue)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4c18f14de2dacc385dc7e66834802cb/7b67d/taskQueue.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.50632911392405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABsElEQVR42j1Sy47TQBD0b7DxeMbvscfzsJ04D2eXlYiyEgsIoQgkxIEDJ76Avy/KDuJQmu6Wu7pc3VFZTzDdEa05IPgnOHdmfkLXzdD1DiI2iOOOb4ckIcQSW74WMnGseah/kEQUb1okbwhlocwOsTBro1gapUcsBzTNghEPYmBthEoHyGILmW/RNUcoxjFjRURpN6C8zBDKQCSEaJGmDlnWY/Ye73qNy6jxfqrwcZ/j5WBgigGvesSHwuFL1eOWO/xk/lTtEEkmiXacrhEnDRU2VGEg0zvZ7ZTjNqewlSZRA6MtXB7wrbT4kbX4pXv8Liz+VB4v5UjC2qPYjSjnA6rrW5SnCcV+QlZT4eBwnT1uF4vXZ4/Hqcc29DD5gCv9/dwd8D2c8dWe8KmZsOWvRyKxVESVkoYrB6k8c8tFLBbQePqoWMszjywNqxVC8DsZWO9pz7B6qtJxRVRkHcrcYLMxeOBylApcwBF1vUexmM2NxmKBw4ZxWR1gzJnE47phkQQK6DngDhK2aOv7aSyqFFUYnkxrZuTcmiDZ0rg2k7TWR4TwzLN65MCJ9UXp8B9/ARRz72+ZpgLfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"톰캣 스레드풀\"\n        title=\"\"\n        src=\"/static/f4c18f14de2dacc385dc7e66834802cb/f058b/taskQueue.png\"\n        srcset=\"/static/f4c18f14de2dacc385dc7e66834802cb/c26ae/taskQueue.png 158w,\n/static/f4c18f14de2dacc385dc7e66834802cb/6bdcf/taskQueue.png 315w,\n/static/f4c18f14de2dacc385dc7e66834802cb/f058b/taskQueue.png 630w,\n/static/f4c18f14de2dacc385dc7e66834802cb/40601/taskQueue.png 945w,\n/static/f4c18f14de2dacc385dc7e66834802cb/78612/taskQueue.png 1260w,\n/static/f4c18f14de2dacc385dc7e66834802cb/7b67d/taskQueue.png 2240w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li><strong>요청 도착</strong></li>\n<li><strong>현재 스레드 수 &#x3C; corePoolSize</strong>: 새 스레드 생성</li>\n<li><strong>corePoolSize &#x3C;= 현재 스레드 수 &#x3C; maxPoolSize</strong>: 새 스레드 생성 (큐보다 스레드 우선)</li>\n<li><strong>maxPoolSize 도달</strong>: 큐에 추가</li>\n<li><strong>큐도 가득참</strong>: RejectedExecutionException</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">예: corePoolSize=10, maxPoolSize=200, queueSize=100\n\n요청 1-10:    즉시 새 스레드 생성 (10개)\n요청 11-200:  새 스레드 생성 (190개 추가, 총 200개)\n요청 201-300: 큐에 대기 (100개)\n요청 301+:    거부 (RejectedExecutionException)</code></pre></div>\n<p>Tomcat은 일반 ThreadPoolExecutor와 달리 <strong>큐보다 스레드 생성을 우선</strong>합니다. 큐에서 대기하는 시간을 줄여 응답 지연을 최소화하기 위한 설계입니다.</p>\n<p><strong>Tomcat TaskQueue 소스코드</strong> (<a href=\"https://github.com/apache/tomcat/blob/main/java/org/apache/tomcat/util/threads/TaskQueue.java#L67\">GitHub 링크</a>):</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Override</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">offer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Runnable</span> o<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 스레드가 maxPoolSize보다 적으면 false 반환 → 새 스레드 생성 유도</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSizeNoLock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> parent<span class=\"token punctuation\">.</span><span class=\"token function\">getMaximumPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">offer</span><span class=\"token punctuation\">(</span>o<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">offer()</code>가 <code class=\"language-text\">false</code>를 반환하면 ThreadPoolExecutor는 새 스레드를 생성합니다. Tomcat은 이 특성을 활용해서 큐보다 스레드 생성을 우선합니다.</p>\n<h2>Filter Chain 실행</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Request\n  ↓\nApplicationFilterChain\n  ├── Filter 1: CharacterEncodingFilter\n  ├── Filter 2: LoggingFilter\n  ├── Filter 3: AuthenticationFilter\n  └── Servlet: DispatcherServlet (Spring MVC)\n       ↓\n    Spring Interceptor Chain\n       ├── Interceptor 1\n       ├── Interceptor 2\n       └── Controller\n  ↓\nResponse</code></pre></div>\n<h3>Filter vs Interceptor</h3>\n<table>\n<thead>\n<tr>\n<th>구분</th>\n<th>Filter</th>\n<th>Interceptor</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>레벨</strong></td>\n<td>Servlet 레벨</td>\n<td>Spring MVC 레벨</td>\n</tr>\n<tr>\n<td><strong>실행 시점</strong></td>\n<td>DispatcherServlet 이전</td>\n<td>DispatcherServlet 이후</td>\n</tr>\n<tr>\n<td><strong>용도</strong></td>\n<td>인코딩, 인증, 로깅</td>\n<td>권한 체크, 공통 로직</td>\n</tr>\n<tr>\n<td><strong>예외 처리</strong></td>\n<td>web.xml error-page</td>\n<td>@ExceptionHandler</td>\n</tr>\n</tbody>\n</table>\n<h2>Connection 관리</h2>\n<h3>Keep-Alive 동작 원리</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/518f47b646a0c444395ca29497dbdb2f/08b4d/HTTPKeep.webp\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.74683544303798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRr4BAABXRUJQVlA4WAoAAAAQAAAAEwAADwAAQUxQSNUAAAABgFvbtmplfX/2/Z83zndX3N3dISenACrRzKEDckIqu6+IiJgAIGwlkxamlU7l0pidi92r1TQQXby5PDxJGqOZ+dbYEPA6C7Ot6Yrx6cPDPdB8Af6OgKVfH17vgNsf4H8TSE/FiY0LUB5CaiwJ7W4/CwpWpzqWBAVCaFR6Z0AItfzhLtDpTjQkqpi7o3JIA/oimXKAUhvtAlai7EvpKGB3VIoq0BuOHFAIRSgnpbcLlMp9EVmDRK21bIMCne5EQ2TQBVBAuwBdoJ43ukA3aTiAHTIcwAEAVlA4IMIAAAAQBQCdASoUABAAPtFUo0uoJKMhsAgBABoJbACdMoRwIsBxY+mV7zcRGQnxTbap2vgAAP6fB/4VdGAlifdub/6iXKgxTLNzEKEBiVGa+hli1YLX0N5PZ73d7jrAnKzEbKKy9VKBQl7dCAMujnmUffPN4kG4JQHgE/kqLrA4Dnt5/UMxBFmPKoWUkrt0p/kRF80Ml+iZym+8GQX5UW3tWBtSBf0XAXC2aM6jnaj5udL72k20pBQck+ulw8VSj5NOUwAAAA=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Keep-Alive 동작 원리\"\n        title=\"\"\n        src=\"/static/518f47b646a0c444395ca29497dbdb2f/8aab1/HTTPKeep.webp\"\n        srcset=\"/static/518f47b646a0c444395ca29497dbdb2f/81b7c/HTTPKeep.webp 158w,\n/static/518f47b646a0c444395ca29497dbdb2f/6ea66/HTTPKeep.webp 315w,\n/static/518f47b646a0c444395ca29497dbdb2f/8aab1/HTTPKeep.webp 630w,\n/static/518f47b646a0c444395ca29497dbdb2f/08b4d/HTTPKeep.webp 750w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>HTTP/1.0 (Keep-Alive 없음)</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Client → Server: GET /page1\nClient ← Server: 200 OK (연결 종료)\n\nClient → Server: GET /page2 (새 연결)\nClient ← Server: 200 OK (연결 종료)\n\n→ 요청마다 TCP 3-way handshake 반복 (비효율)</code></pre></div>\n<p><strong>HTTP/1.1 (Keep-Alive 기본)</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Client → Server: GET /page1\nClient ← Server: 200 OK (Connection: keep-alive)\n\nClient → Server: GET /page2 (같은 연결)\nClient ← Server: 200 OK (Connection: keep-alive)\n\n→ 하나의 TCP 연결로 여러 요청 처리</code></pre></div>\n<p><strong>Keep-Alive 설정</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HTTP/1.1<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">maxKeepAliveRequests</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>   <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">하나의</span> <span class=\"token attr-name\">연결에서</span> <span class=\"token attr-name\">최대</span> <span class=\"token attr-name\">요청</span> <span class=\"token attr-name\">수</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n           keepAliveTimeout=\"60000\"     <span class=\"token comment\">&lt;!-- Keep-Alive 타임아웃 (ms) --></span>\n           /></code></pre></div>\n<h3>Connection Timeout</h3>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HTTP/1.1<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">connectionTimeout</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20000<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">20초</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n           /></code></pre></div>\n<p><strong>동작</strong>:</p>\n<ol>\n<li>클라이언트 연결 수립</li>\n<li>HTTP 요청 헤더 대기 (connectionTimeout 시작)</li>\n<li>20초 내에 요청 헤더 도착 안 하면 연결 종료</li>\n</ol>\n<p><strong>주의</strong>: <code class=\"language-text\">connectionTimeout</code>은 <strong>요청 헤더 읽기 타임아웃</strong>입니다. Servlet 실행 시간과는 무관합니다.</p>\n<h3>maxConnections vs acceptCount</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/35ac48e612d380d19c8fff24b4d3abcc/de0bd/tcpPoller.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.139240506329116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABo0lEQVR42i2S2U7kMBBF8xkktmMncRbHjrPQpBtCS2jUjcSg0SChGQnxyAs/wPdfym4ejspb3bp2OdHNNYy5QdvukF01SNMGWSBrI4xRZIaiAWcdEcY9RIDbHxyksMiFQ8IoKRziuUU5rpDSQqkBguY8H8AI23v0ZkQmJgg5QSoPXkzgaoTrKKdawAhBa4lsPVRJiVkDJi6OgqCUDpu3+DVqnBeNp53G39sKj4ceHQn9aSb8Vj1ea4//pcNHt+BeL0i4JOu0wQRdkwQDQVgqh9Pc4N9W4eUgMTQ1rK7RNhaWCr5ph/fC4KMd8VlafOkBJz0Hhw7VfoY+7lGfj9Dbimq9hqoHHEaHx23A68ni+WHAcfWYvY8Oz8Gh2eFtvMOL3eOp22GpSJCJHhknhzy8Yw9O85yuG5qQZtQE2gvXD45jzEP0yOltubiMpRyRU5GcxkmpDOry8nZp2hEtHXbozJ5YUZYzrRnqNBVlNnZYqQnWbdD1DRlxEIKaKHyEBFu0VRcdBbLMxOp9f4Bztyioc0GEx0QXY1HMcMM9fbc7Out/GCPf9sTqh7KxKx8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tcp 백로그\"\n        title=\"\"\n        src=\"/static/35ac48e612d380d19c8fff24b4d3abcc/f058b/tcpPoller.png\"\n        srcset=\"/static/35ac48e612d380d19c8fff24b4d3abcc/c26ae/tcpPoller.png 158w,\n/static/35ac48e612d380d19c8fff24b4d3abcc/6bdcf/tcpPoller.png 315w,\n/static/35ac48e612d380d19c8fff24b4d3abcc/f058b/tcpPoller.png 630w,\n/static/35ac48e612d380d19c8fff24b4d3abcc/40601/tcpPoller.png 945w,\n/static/35ac48e612d380d19c8fff24b4d3abcc/78612/tcpPoller.png 1260w,\n/static/35ac48e612d380d19c8fff24b4d3abcc/de0bd/tcpPoller.png 2238w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">maxConnections</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10000<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">acceptCount</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">maxThreads</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><strong>요청 처리 과정</strong>:</p>\n<table>\n<thead>\n<tr>\n<th>동시 연결 수</th>\n<th>상태</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1 ~ 10000</td>\n<td>정상 처리 (Poller가 관리)</td>\n</tr>\n<tr>\n<td>10001 ~ 10100</td>\n<td>OS 큐 대기 (TCP backlog)</td>\n</tr>\n<tr>\n<td>10101+</td>\n<td>Connection Refused</td>\n</tr>\n</tbody>\n</table>","wordCount":{"words":383},"frontmatter":{"title":"Tomcat 요청 처리 흐름과 Thread 모델","date":"December 13, 2025","description":"Tomcat의 요청 처리 파이프라인과 NIO Thread 모델을 상세히 알아봅니다."}},"previous":{"fields":{"slug":"/tomcat-architecture/"},"frontmatter":{"title":"Tomcat 아키텍처"}},"next":{"fields":{"slug":"/tomcat-tuning/"},"frontmatter":{"title":"Tomcat 성능 튜닝"}}},"pageContext":{"id":"47a23bca-623c-5770-90cf-f7843bed9763","previousPostId":"cf002e08-7ae1-521d-ae4b-8132fdc3aff2","nextPostId":"ae0daa87-98e0-5dd4-b5c1-bd4dc589775c"}},"staticQueryHashes":["3257411868","3517523002"],"slicesMap":{}}