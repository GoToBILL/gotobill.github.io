{"componentChunkName":"component---src-templates-blog-post-js","path":"/tomcat-architecture/","result":{"data":{"site":{"siteMetadata":{"title":"GoToBill"}},"markdownRemark":{"id":"cf002e08-7ae1-521d-ae4b-8132fdc3aff2","excerpt":"Tomcat 아키텍처 개요 Tomcat은 단순한 웹 서버가 아닙니다. 여러 계층의 컴포넌트가 유기적으로 연결된 Servlet Container입니다.  핵심 컴포넌트 컴포넌트 역할 설명 Server 최상위 컨테이너 Tomcat 인스턴스 전체, 포트 8005로 shutdown…","html":"<h2>Tomcat 아키텍처 개요</h2>\n<p>Tomcat은 단순한 웹 서버가 아닙니다. 여러 계층의 컴포넌트가 유기적으로 연결된 <strong>Servlet Container</strong>입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7d6d72b160ccb1bcd4588f3224590655/0a47e/Tomcat.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.08860759493672%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvUlEQVR42nWSR2/CQBCF/f//BAcuiGaKhEQ40DEEBJgWejPCopgiEHAAnM9eQ5JD5rDa8ubNmzcrDYfD8XhcKBQikUg0GpVlORaLJRKJj/+D13g8XqvVpG632+/3uQoGg4qiVCqVZrPJTa/XE+vv6HQ6X3bU6/V8Pi8JUDqdXiwW1+vVNM3dbgd3KpVKJpPFYrFcLn++YjAYAEaspmkcncrZbJYc0w5Y3G63y+XyeDx+v59GwuGwbAdE1WoVdaPRiL3ELpfLqaqKhOVyeTweIaYl0jKZDERQNxoNXimDbFbSsMlKJu1NttlsTqfTfD4X5mHJZDKBiyan0yn3UOAIeCeZ1lEPN6DVanW5XMAFAgGfzweIytBxSbetVktI+EkWZQnodV1fr9c8hEIhktGCBcihGrxUns1mAEhBkZXcbrdVO8jhYbvd8sDYvF4v3T6fT4w8HA7n8/l2u93v9/1+TztOZWE9U3m7TX3+Cd6C4Ph4PFhhYQMY8Qhx3BZzZqqGYYhk6osRgKMmWoxX0DMaS6USydac359EeMaeefDVQPBDlL8hPgwreL6G1TNoPACKpVM7tH9ibgcbMLqufwNeM4idxYaezgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Tomcat 전체 컴포넌트 계층도\"\n        title=\"\"\n        src=\"/static/7d6d72b160ccb1bcd4588f3224590655/0a47e/Tomcat.png\"\n        srcset=\"/static/7d6d72b160ccb1bcd4588f3224590655/c26ae/Tomcat.png 158w,\n/static/7d6d72b160ccb1bcd4588f3224590655/6bdcf/Tomcat.png 315w,\n/static/7d6d72b160ccb1bcd4588f3224590655/0a47e/Tomcat.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>핵심 컴포넌트</h3>\n<table>\n<thead>\n<tr>\n<th>컴포넌트</th>\n<th>역할</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Server</strong></td>\n<td>최상위 컨테이너</td>\n<td>Tomcat 인스턴스 전체, 포트 8005로 shutdown 명령 수신</td>\n</tr>\n<tr>\n<td><strong>Service</strong></td>\n<td>Connector와 Engine 묶음</td>\n<td>하나의 Engine에 여러 Connector 연결 가능</td>\n</tr>\n<tr>\n<td><strong>Connector</strong></td>\n<td>요청 수신</td>\n<td>HTTP, AJP 프로토콜 처리, Socket 연결 관리</td>\n</tr>\n<tr>\n<td><strong>Engine</strong></td>\n<td>요청 라우팅</td>\n<td>가상 호스트로 요청 전달</td>\n</tr>\n<tr>\n<td><strong>Host</strong></td>\n<td>가상 호스트</td>\n<td>도메인별 애플리케이션 격리</td>\n</tr>\n<tr>\n<td><strong>Context</strong></td>\n<td>웹 애플리케이션</td>\n<td>WAR 파일 하나당 하나의 Context</td>\n</tr>\n<tr>\n<td><strong>Wrapper</strong></td>\n<td>Servlet</td>\n<td>Servlet 인스턴스를 감싸는 컨테이너</td>\n</tr>\n</tbody>\n</table>\n<h2>Connector와 Container</h2>\n<p>Tomcat 내부는 크게 두 부분으로 나뉩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a7662d5840f80e8a646dc5525121ab58/19bb3/tomcatConnec.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.25316455696203%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAAChUlEQVR42m2TzU/UQBjG+y+YCG2nM2233X53u9vugpEFVIghLiGwBGRN8CO7BEI8cJB4MzHolauJV716wKOJetd/6vHtbFd2lcOTzkxmfn2e951RdD2AwSNwkZBi6LqPcm0iTXehao6UrjswjIgUg/OkUiolRENK0TRvDGEVQKuANGdGiigYop2fYyF/gyx+TT9tkYGYoInUBMj5FPBaFUwj8JwNNh/jbusSu5tXONj6jgeLVxB6QesOuHQ5CxMig1K6G4MmMJrTJtZYg2j3IIp9iGgb7p0RzGQHRroGo+iB2TlBk/+BmjYVUw/BVA+quwjWP4f19B3m+q9we3kf/Nlb3Fp5ArZ1Bv3wPdRwldxGEjItZeKMsXBGZWxVC0nUKCODajRpXyrrxlgCUTXCNDNS86+U645OAyMpTsUP7DpSt46W79PXgykIRBGnY5b6BzgLMkg6uXBNHxc7Bj6eZPh01sSH5ypix6fuE+AGmGm2SuAsTAKpg2UsS0QYdG0cbwR42QswWrfg2mV3sxthEsjK+yZrSDACGTyRQHnPKJaqN6CRI8ZbmNczcDokRLOCEcTK6VvIsUVjpawTp7pwI4She6T6+MKWL4IaJlidnJJbKr6gn8s1OiNh5UshIybNbbuQUsrnI8wG7GwLycoxrPyInJETbxXewiFqC6fgzj1wu416Z4Bw6RRmtEtnmnBafSTLJ6jlQ3LaHjs0ZNQU9v0LdIff4G3/gKgtgRcj5IMviAe/wdMXEME6ioPPWDr6BbN7CcvpwNu4RHf0E07vK0w6Y48jV7fdewjm98HDvXHB3RUa70DEA9rchWl3IMJt8OgAlv9IujGDTZo/Jsd7FLeDWq2NP+U2oQDEr/EWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"톰캣 커넥터\"\n        title=\"\"\n        src=\"/static/a7662d5840f80e8a646dc5525121ab58/f058b/tomcatConnec.png\"\n        srcset=\"/static/a7662d5840f80e8a646dc5525121ab58/c26ae/tomcatConnec.png 158w,\n/static/a7662d5840f80e8a646dc5525121ab58/6bdcf/tomcatConnec.png 315w,\n/static/a7662d5840f80e8a646dc5525121ab58/f058b/tomcatConnec.png 630w,\n/static/a7662d5840f80e8a646dc5525121ab58/40601/tomcatConnec.png 945w,\n/static/a7662d5840f80e8a646dc5525121ab58/78612/tomcatConnec.png 1260w,\n/static/a7662d5840f80e8a646dc5525121ab58/19bb3/tomcatConnec.png 2066w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Coyote (Connector)</h3>\n<p>네트워크 레벨을 담당합니다.</p>\n<ul>\n<li><strong>ProtocolHandler</strong>: HTTP/1.1, HTTP/2, AJP 등 프로토콜별 처리</li>\n<li><strong>Endpoint</strong>: 소켓 연결 관리, I/O 처리</li>\n<li><strong>Processor</strong>: HTTP 요청 파싱, 응답 생성</li>\n</ul>\n<h3>Catalina (Container)</h3>\n<p>비즈니스 로직 실행을 담당합니다.</p>\n<ul>\n<li><strong>Engine</strong>: Host 헤더 기반 라우팅</li>\n<li><strong>Host</strong>: 도메인별 애플리케이션 관리</li>\n<li><strong>Context</strong>: 웹 애플리케이션 단위</li>\n<li><strong>Wrapper</strong>: Servlet 인스턴스 관리</li>\n</ul>\n<h2>server.xml 구조</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/73e89d0952b2ee7004d75471776b5d87/9c1e6/tomcatServer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACEUlEQVR42mWTy5KTQBiF8xIzQqChG5o7NJBAMsFc5qJV6lgpx42XWVk1VS4sl25dmAdw4dKFz+HTHf/ujKXJLE5VA83Hf85pRjxQiLMeoWxhPYpgWRFsOyYlRuOxVmpk2ym4UMiKAUk+gHkl3c/gODlctyCVGDFWIA6m8MUUXtzCoxf0Q8bKIyk4boqAP8Fm2OFq+IFE3kCEJaJ4Ds4bAhcYuW6OJhrQpCuk6hyinENEBPfUkWowNwMLrlAtv0Gd/wJP38D39dQTCNHSusZIj8tpofILZO0aLNo/8I+BvgaSNfkYk6efMHmxgyi2CMhREHaIacqAnI4c2iT8BlVxiXT6DOFsjaBe0EeaA6DvK1iOwjIL8HUr8P2ti+sJh+11iKIOMuopqmpv2Sc7Ktsgb64R9RcQwwpckm1W/TehAiOgW6SY3C7QfVxB9FRoeAYZ95RxbXIe7QuoIMMZ2pomVDQdte6xY8skp8Rp1WH87jXsu1tY/RLSb8lybzLW+/ZAY6lBQUA53VA2M3D2MEOP8j7JLmE9/4KTmx1O65eQvCa7uuXWQA1QlzBNlsjlGZguJGhNDAcZ0vWYpWi8LT50P/F59RuL5A4irqmQxT+gPmNKLgxQ6Ca96qHde+m9IZuji19hlr5HxNfgQWPa9U2JGkinO9bniC5cypLdy/P+6hDq0o9guwk1Hpu1LoKZARoD/QMk10a2q964wwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"톰캣 서버 xml\"\n        title=\"\"\n        src=\"/static/73e89d0952b2ee7004d75471776b5d87/f058b/tomcatServer.png\"\n        srcset=\"/static/73e89d0952b2ee7004d75471776b5d87/c26ae/tomcatServer.png 158w,\n/static/73e89d0952b2ee7004d75471776b5d87/6bdcf/tomcatServer.png 315w,\n/static/73e89d0952b2ee7004d75471776b5d87/f058b/tomcatServer.png 630w,\n/static/73e89d0952b2ee7004d75471776b5d87/40601/tomcatServer.png 945w,\n/static/73e89d0952b2ee7004d75471776b5d87/78612/tomcatServer.png 1260w,\n/static/73e89d0952b2ee7004d75471776b5d87/9c1e6/tomcatServer.png 1734w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Connector 종류</h2>\n<h3>NIO (Non-blocking I/O)</h3>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.coyote.http11.Http11NioProtocol<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">maxThreads</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">maxConnections</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><strong>특징</strong>:</p>\n<ul>\n<li>Java NIO 사용</li>\n<li>Selector 기반 I/O 멀티플렉싱</li>\n<li>메모리 효율적 (연결당 Thread 불필요)</li>\n<li><strong>Spring Boot 기본값</strong></li>\n</ul>\n<h3>NIO2 (Async I/O)</h3>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.coyote.http11.Http11Nio2Protocol<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">maxThreads</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><strong>특징</strong>:</p>\n<ul>\n<li>Java 7+ AsynchronousSocketChannel 사용</li>\n<li>완전한 비동기 I/O</li>\n<li>NIO보다 약간 높은 성능 (벤치마크 환경 의존적)</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ee500f526894fee1f5fbb03bcc84074/5d942/niovsnio2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.34177215189874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADKElEQVR42k1U2ZLTMBDcv2ATH/ItW7YsX7GTdY6FBUIBVbzw/7/StOQs8DBlHaOZ7pkeP+32Er5f0iSiYkFSvyKuLojzGQHPg1DBo8+e6zBqIIIakRoQDUfENFEOCAOeRy1jNHjaBR3a/ob1/BmtOaEoOmSpRpZp5HnHfc8HCs9CojtccT5/wzBcUcoJRTagyGnFiLI8IIoMA/rMGGskaYs0HZDSKY6bf5Zo+F6FvSiRMHjuApyQ05Kk47uO73oCINJQbwi1WXG+vGGe7xiHO6Q0dLYJWjp2dKyxY8B2WLGubzivvzH03xncMPiGUBKxQ/j8nEGEElmcIRIpZM51WsHzbF0rBlMIAiLcV7xX9JMo0wJJXEGIhveNSyiE3hDuxQGqWTEdPmI5fUVVzURnkGeWXu8QhGzELqnQjjdMlzvU8QrJBhbFTDu4b1kuLFHHgLucBy2M7tCbAapmM1KbXZGColO9Ud5V0PqE0/qKw3JB2x7R1INLausq5UggPZ68sGcjeh70KHk5ZFv9YjYqjlu3DojQ85mAwdOoJG2FlM0qMvpF+uFrCII19AKDbrjh+vqTxb7jphfSIVVpsw6kMrHGGvtEwUxXNuUH5UXK5RFKrVDV4sqkFHUZ95aybUaJIpXUVIk0r0nZ0twaIsRG2aOl+bjVTc4uYKUon3yiEib3jSLW0IsOkNUJpltd6/OHpqy2/uor0PCSBi0RXs4/cFy/Ql8vfDdR4LYhM1FyypLBUtYouem6MzMuyLlWzQszjk6DVmNCtPB2lAy7X5cta11DpgpVwYmiVkVknMgdZf+BsDUXdO0ZV9YjTYYHutFRcQg5jsq8UNCvGKeP6CnsijNv76V8lw0R2oGu1QHzdMQyLVhqAyUbBjMMahxK2z2PnbbNeyHlaX7DNN3R6JujqljLun6h/8iAoeG8WiFzzKgjK86UUomizezeTkDAP0okNmmEobXWNcHStMisCfGgbPpPuFy/Y1l+UbBf2MXJUbBm5WDrYwPYov8fYNu/28gEpPz8IeMUSFrJeZWcYTvH/Ad6tTOff6P9XvHe7htnvq8fZkX/bsbt/wAm5/dlxwxz+gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nio vs nio2\"\n        title=\"\"\n        src=\"/static/7ee500f526894fee1f5fbb03bcc84074/f058b/niovsnio2.png\"\n        srcset=\"/static/7ee500f526894fee1f5fbb03bcc84074/c26ae/niovsnio2.png 158w,\n/static/7ee500f526894fee1f5fbb03bcc84074/6bdcf/niovsnio2.png 315w,\n/static/7ee500f526894fee1f5fbb03bcc84074/f058b/niovsnio2.png 630w,\n/static/7ee500f526894fee1f5fbb03bcc84074/40601/niovsnio2.png 945w,\n/static/7ee500f526894fee1f5fbb03bcc84074/78612/niovsnio2.png 1260w,\n/static/7ee500f526894fee1f5fbb03bcc84074/5d942/niovsnio2.png 1343w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>핵심 차이점</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/beeb00a6f218fc44180919bdb14b5b36/8c381/niodiffrence.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABE0lEQVR42lWRW5KCMBBFWYhCkiaACjGEhyOIr/Fn9r+gO21ntJyPW9WVVE6f7iRKeaxWNdLUYb1uQBRgbY+Ua5U5ZNkeSrWSLPOoyiPK4gsq9dBZC627d4zpkPTDg4sgsCcgtwPK5g67u3JusNXCsAClAzQ3t/UE2y2gdgaFE4zu+X0vMKIeidufsd1NMPQ0cNB8mW/OAizqbxjLNgzSAgww5QDjJ5CfuR7fZhHKQO+vcG6RUZ/jGe5SsBmVs8D0n9kLqIshwrbH2OADJsAQbqg2LwsPsgdU/geWLWWMfOQc4kOG0uaAfLyAdkdpTjT8SxI/wAkwQjvZXdE8eOS7xG6vfN5GI96xaSbk7UngRn8ajvgFPCGyltlGrAAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"nio vs nio2 핵심 차이점\"\n        title=\"\"\n        src=\"/static/beeb00a6f218fc44180919bdb14b5b36/f058b/niodiffrence.png\"\n        srcset=\"/static/beeb00a6f218fc44180919bdb14b5b36/c26ae/niodiffrence.png 158w,\n/static/beeb00a6f218fc44180919bdb14b5b36/6bdcf/niodiffrence.png 315w,\n/static/beeb00a6f218fc44180919bdb14b5b36/f058b/niodiffrence.png 630w,\n/static/beeb00a6f218fc44180919bdb14b5b36/40601/niodiffrence.png 945w,\n/static/beeb00a6f218fc44180919bdb14b5b36/78612/niodiffrence.png 1260w,\n/static/beeb00a6f218fc44180919bdb14b5b36/8c381/niodiffrence.png 1267w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>OS 커널 레벨에서의 차이</h3>\n<p>BIO, NIO, NIO2는 OS 커널과 상호작용하는 방식이 다릅니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f4d2599beaaebf4604b76ccca2fc45f4/f1c64/bionio.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.17721518987341%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD60lEQVR42j2Ua2scZRTHF6EWbWtCk8zO7szOfee6szM7m71kd3NtmiZtGkqNUYtWaWsKtaJ4KSi0VoLQ2EotCL7wjVBBX/gd/Gg/z06DL/4cnnOe5zzn9j+VuTkTVbGxak1MgaE2URSXhQWbquJQ1yI0o03dSKnrLarVZolaLaBuJWh2imaJTYupqRGVet3HEUXuZnS8jLbIRiNiqjeMGNsf4iUbeOEKjtsTW4zeSLDMDnYywCpGWNkQ2+mILaViyOMkykmCnM2wh+ctEgR9NInMc1OSsE3kp/jDIWF/JLouWj0m7ObEhdichKiZ4fsDbDun4jgZk8klxqMtuumYMOwTx0OJMCSV8/LyNssrV2gXK8TpiMDvo0t6g/VtxhevSDBLcn8kd1dx3UVJWQsxzEJC7mJYuaSZYppZ6dAQadk9TNFbZrvUG2ZKQ4+JJJs47otdyuJEuF4stoSK7+2xMTminz9m0HnBsPsnS8VLeTSi373D6tL3jAfPGRS/MVr8myI9khpmdDt3yFqHdNpfivyGTvqYprtHxWp0CewNmuYGob1LZO8TO29LWhlZeJ1h+zaT3iN6rSOG6S9kweeSxRIXl39iZ/1XLkz+YqX3D+v9f2kFd6lo2TrR/n0aVz5hZus2Z7YPObtzF9WWrkVjGvkWamuVansNJdugKjpDumk2RbpjLHeC5U1wmquYttRQXdzFu3WM9fExMzee8Np7zzj1/jPmnT7Nd76iePA7tcMXvH7zOafu/cHZ6w/RpN7Z3R/pffYzjVtPOP3uEadvvWB+6UC6bEg3mzGx7dFym6SuV6IhzVKjdc4nW8y2dphNr/JWdo35aFOGeRFt8w76pXvMXrjHm+uf8sbW1yykl6ls5i7HN3Me7an8cPUcT/fPcbw/QyxOD8YRD/Zi7q/O8cXaDA+3z/DRRMGSSbi8GLHTcdjtNLjW1Tnoa3SDgIprBmT+FD554FOEPt0owNAjLnUDPrzQ4saKwwcrOoebOlcHDqET8+31lEcHCd/tKhLMeZ4ezLLd86goVR9FDU8QCeISqpwX1IQ5JWau2hK0mVczlFpbWNSipqWCjJreESnQC+F6Jl2uC/ll8jUZVkM4+j+mA260Sn52OmslTBlu285ECgGEy1NpWcJpuyhhiq4yddTJBzKog9KpongSXVOYImXIxuTtRfkgLrk9ZU9dAkiEIXFUlKwxrfargASGIRFON0cm2yLP+qVRkZWlqm7pMJZt0i2WSFojdPmsVvNRaxFZFDLuZaT5mmyg4uQjoaohy2G612qyPWr15OSnqISuJ2WtNKnVVOr6q/QbjbY8FEj6DSM7OQvHjU6J/wCjCQ9yczb83wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"BIO vs NIO vs NIO2 커널 레벨 비교\"\n        title=\"\"\n        src=\"/static/f4d2599beaaebf4604b76ccca2fc45f4/f058b/bionio.png\"\n        srcset=\"/static/f4d2599beaaebf4604b76ccca2fc45f4/c26ae/bionio.png 158w,\n/static/f4d2599beaaebf4604b76ccca2fc45f4/6bdcf/bionio.png 315w,\n/static/f4d2599beaaebf4604b76ccca2fc45f4/f058b/bionio.png 630w,\n/static/f4d2599beaaebf4604b76ccca2fc45f4/40601/bionio.png 945w,\n/static/f4d2599beaaebf4604b76ccca2fc45f4/78612/bionio.png 1260w,\n/static/f4d2599beaaebf4604b76ccca2fc45f4/f1c64/bionio.png 1390w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>BIO (Blocking I/O)</strong>:</p>\n<ul>\n<li><code class=\"language-text\">read()</code> 시스템콜 호출 시 데이터가 올 때까지 스레드가 sleep</li>\n<li>연결당 1개 스레드 필요 (1000 연결 = 1000 스레드)</li>\n<li>스레드 생성/관리 오버헤드 큼</li>\n</ul>\n<p><strong>NIO (Selector 기반)</strong>:</p>\n<ul>\n<li>Linux의 <code class=\"language-text\">epoll</code>, macOS의 <code class=\"language-text\">kqueue</code> 활용</li>\n<li>1개 Poller 스레드가 수천 개 연결의 이벤트를 감지</li>\n<li>이벤트 발생 시에만 Worker 스레드 할당</li>\n</ul>\n<p><strong>NIO2 (Async I/O)</strong>:</p>\n<ul>\n<li>커널이 I/O 완료까지 전부 처리</li>\n<li>버퍼 복사까지 커널이 수행 후 콜백 호출</li>\n<li>애플리케이션은 요청만 하고 즉시 다른 일 가능</li>\n</ul>\n<p><strong>epoll이란?</strong></p>\n<p>Linux에서 대량의 연결을 효율적으로 처리하기 위한 I/O 이벤트 알림 메커니즘입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">// 기존 select: 모든 FD 검사 - O(n)</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">FD_ISSET</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>readfds<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// epoll: 준비된 FD만 반환 - O(1)</span>\n<span class=\"token keyword\">int</span> n <span class=\"token operator\">=</span> <span class=\"token function\">epoll_wait</span><span class=\"token punctuation\">(</span>epfd<span class=\"token punctuation\">,</span> events<span class=\"token punctuation\">,</span> MAX_EVENTS<span class=\"token punctuation\">,</span> timeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// events[i]는 이미 준비된 FD만 포함</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>방식</th>\n<th>시간복잡도</th>\n<th>10000 연결 중 10개 이벤트</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>select/poll</td>\n<td>O(n)</td>\n<td>10000번 검사</td>\n</tr>\n<tr>\n<td>epoll</td>\n<td>O(1)</td>\n<td>10개만 반환</td>\n</tr>\n</tbody>\n</table>\n<h3>APR (Apache Portable Runtime)</h3>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.coyote.http11.Http11AprProtocol<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">maxThreads</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>200<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p><strong>특징</strong>:</p>\n<ul>\n<li>Native C 라이브러리 사용</li>\n<li>OpenSSL 직접 연동 (SSL/TLS 성능 우수)</li>\n<li>리눅스 epoll, BSD kqueue 활용</li>\n<li>설치 복잡함 (별도 라이브러리 필요)</li>\n</ul>\n<p><strong>Native C 라이브러리란?</strong></p>\n<p>NIO/NIO2는 Java 코드가 JVM을 통해 OS 시스템콜을 호출합니다. APR은 Tomcat이 직접 만든 C 라이브러리(libtcnative)를 통해 OS를 호출합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NIO:  Java 코드 → JVM (JNI) → OS 시스템콜\nAPR:  Java 코드 → libtcnative.so (C) → OS 시스템콜</code></pre></div>\n<p>JVM을 거치지 않고 C 코드가 직접 OS와 통신하므로 오버헤드가 줄어듭니다.</p>\n<p><strong>왜 OpenSSL이 빠른가?</strong></p>\n<p>Java SSL(JSSE)과 OpenSSL의 차이:</p>\n<table>\n<thead>\n<tr>\n<th>구분</th>\n<th>Java SSL</th>\n<th>OpenSSL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>구현 언어</td>\n<td>Java (JVM 위에서 실행)</td>\n<td>C (네이티브 코드)</td>\n</tr>\n<tr>\n<td>최적화</td>\n<td>범용적</td>\n<td>CPU 명령어 최적화 (AES-NI 등)</td>\n</tr>\n<tr>\n<td>성능</td>\n<td>기준</td>\n<td>2-3배 빠름</td>\n</tr>\n</tbody>\n</table>\n<p>OpenSSL은 CPU의 하드웨어 암호화 명령어(AES-NI)를 직접 활용합니다. Java SSL은 JVM 바이트코드로 실행되어 이런 최적화가 제한적입니다.</p>\n<p><strong>현재는 APR을 권장하지 않습니다</strong></p>\n<p>Tomcat 8.5+부터 NIO/NIO2도 OpenSSL을 사용할 수 있게 되어 APR의 가장 큰 장점이 사라졌습니다.</p>\n<table>\n<thead>\n<tr>\n<th>버전</th>\n<th>SSL 옵션</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Tomcat 8.0 이전</td>\n<td>APR만 OpenSSL 사용 가능</td>\n</tr>\n<tr>\n<td>Tomcat 8.5+</td>\n<td>NIO/NIO2도 OpenSSL 사용 가능</td>\n</tr>\n<tr>\n<td>Tomcat 10+ / Java 17+</td>\n<td>JSSE 성능 대폭 개선</td>\n</tr>\n</tbody>\n</table>\n<p><strong>JSSE</strong>(Java Secure Socket Extension)는 Java 표준 SSL/TLS 라이브러리입니다.</p>\n<p>과거에는 OpenSSL보다 2-3배 느렸지만, Java 8u161+에서 AES-NI 지원이 개선되고 Java 17+에서 암호화 성능이 대폭 향상되어 현재는 대부분의 경우 JSSE만으로 충분합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e14a5fd6af5407e0757afdaeaead021c/11a8f/tomcatConnector.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.81012658227847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADSElEQVR42j1Ty47bRhDkT8SOZJLim0Ny+Bi+JK1kSqvVrpMAXiMBckiAAEaQXHwxcs4ll/xBPiH/WakerXNozIPT1VXVTWe1SrBeZVivb+F5GrnawZgLqmJGMPyE5PIXym//gf/wL159eET4cYvo0xXubyN+f/wafz6H+PtHF3+8+wpOFLfYbCqsCPrmjYLvl6irHpMZUaoem/Id9P5nmOVXRONnuIc76O9a6A9bBE8G38wRfrkk+HiN8X4O4YRRgyTtyS6H6yobnpcjyxre8bxOEXkxVFLAW/nwXiskXgMVdNxXeL1uEMQj/HDCq3UrDDuoYkcQ9T/ghiyTsOVddYuAKljUI5Dn1fDj29nf1HyrESYGcWoQBg2cgIlJJo+LF0BZS/vQ80oLKEXTbKA1DS3RVDTwPPJNw7sWqZoY9JusnZRgqpwtoAUlSMAkRRBJ9qVJ9R7lsFjggKyK7ohqOCEIySrsMDRvYeq33PdwElItyq1thjByySgONAzvbyw1pHF5fpPo+zVSSsyEMSUGtKNOBpQxGygMBbDUe8RJf5NI4IiJLe+FoSsMaYthgoB5jCoyaBMBaAnIfTpCJxPPRgBF8s4mf2FoJYeNlWsj7bDhCPmBeEhWakBYjBZMfAuLCSF9DGkBu2wQsaI0QxrgugRkYpHPlFzfJJNNJrZspAmUnE/Iy72VKKB5dYes2tu9I90qyFDM9f3KAsSU2FW7l67WiNUI1R4gExFSZkaL7FkYkpUhYK0E0DZl4K+2hUdm63VhGSoy6OsDEpotBZS+Q2XYRSrxOYtlc4Tuz1Q2II4HmPaErln4fYCTU3stY0FJJVlFUctHhrM2WiuEeUrgtj6ibRc0HBFdHZBnsy0o7zISyvId0nSGM2+vON0/Yzk/23W7e0LbnVjkwOSF+8WO1cz7y/UHnC/f47i8t+d+uKAzZ8Y9uu5MUgc4qthCccplrnJKFT9LGl7Sl4pSNYEVGeR8I3fym8qq9dFGpQ8svthQ9NHp6cWZzKbpARU7JeACoGiFRMGCGRs3zY94IMNpvqKh9NbGybLT/EuKgsXUHZySIB1Bu/7eStX0qqbpxQtzVQj7ySYN0xXDeMU4PfHNYu9krfQXwD3+A+OzAf3DPX+dAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"BIO vs NIO vs APR 비교\"\n        title=\"\"\n        src=\"/static/e14a5fd6af5407e0757afdaeaead021c/f058b/tomcatConnector.png\"\n        srcset=\"/static/e14a5fd6af5407e0757afdaeaead021c/c26ae/tomcatConnector.png 158w,\n/static/e14a5fd6af5407e0757afdaeaead021c/6bdcf/tomcatConnector.png 315w,\n/static/e14a5fd6af5407e0757afdaeaead021c/f058b/tomcatConnector.png 630w,\n/static/e14a5fd6af5407e0757afdaeaead021c/40601/tomcatConnector.png 945w,\n/static/e14a5fd6af5407e0757afdaeaead021c/78612/tomcatConnector.png 1260w,\n/static/e14a5fd6af5407e0757afdaeaead021c/11a8f/tomcatConnector.png 1272w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>I/O 레이어 구분</h3>\n<p>요청 처리는 <strong>Connector 레이어</strong>와 <strong>Servlet API 레이어</strong>로 나뉩니다.</p>\n<table>\n<thead>\n<tr>\n<th>단계</th>\n<th>레이어</th>\n<th>NIO/NIO2</th>\n<th>APR</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>헤더 읽기</td>\n<td>Connector</td>\n<td>논블로킹</td>\n<td>블로킹</td>\n</tr>\n<tr>\n<td>바디 읽기</td>\n<td>Servlet API</td>\n<td>블로킹</td>\n<td>블로킹</td>\n</tr>\n<tr>\n<td>응답 쓰기</td>\n<td>Servlet API</td>\n<td>블로킹</td>\n<td>블로킹</td>\n</tr>\n</tbody>\n</table>\n<p><strong>헤더 읽기가 Connector 레이어인 이유</strong>: Tomcat은 HTTP 헤더를 파싱해야 어떤 Servlet으로 라우팅할지 결정할 수 있습니다. 즉, Servlet 호출 전에 헤더 파싱이 완료되어야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1. Connector가 헤더 읽기 (NIO: 논블로킹 / APR: 블로킹)\n2. Host, URL 경로 파싱 → Servlet 라우팅 결정\n3. Servlet 호출\n4. Servlet이 바디 읽기/응답 쓰기 (블로킹)</code></pre></div>\n<p><strong>Servlet API 블로킹 동작</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">클라이언트 → [NIC] → [Kernel Buffer] → [ByteBuffer] → [Servlet]\n                            ↑                 ↑\n                       NIO/NIO2 영역      Servlet API 영역</code></pre></div>\n<ul>\n<li><code class=\"language-text\">request.getInputStream().read()</code>: ByteBuffer에 데이터가 준비될 때까지 대기</li>\n<li><code class=\"language-text\">response.getOutputStream().write()</code>: Kernel Buffer에 공간이 생길 때까지 대기 (클라이언트가 느리면 블로킹)</li>\n</ul>\n<h2>Connector 주요 파라미터</h2>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Connector</span> <span class=\"token attr-name\">port</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>8080<span class=\"token punctuation\">\"</span></span>\n           <span class=\"token attr-name\">protocol</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>HTTP/1.1<span class=\"token punctuation\">\"</span></span>\n\n           <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">Thread</span> <span class=\"token attr-name\">Pool</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n           maxThreads=\"200\"           <span class=\"token comment\">&lt;!-- 최대 Worker Thread 수 (기본값: 200) --></span>\n           minSpareThreads=\"10\"       <span class=\"token comment\">&lt;!-- 최소 유휴 Thread 수 (기본값: 10) --></span>\n\n           <span class=\"token comment\">&lt;!-- Connection Pool --></span>\n           maxConnections=\"10000\"     <span class=\"token comment\">&lt;!-- 최대 동시 연결 수 (기본값: NIO 10000) --></span>\n           acceptCount=\"100\"          <span class=\"token comment\">&lt;!-- 대기열 크기, OS backlog (기본값: 100) --></span>\n\n           <span class=\"token comment\">&lt;!-- Timeout --></span>\n           connectionTimeout=\"20000\"  <span class=\"token comment\">&lt;!-- 요청 헤더 읽기 타임아웃 (기본값: 20000ms) --></span>\n           keepAliveTimeout=\"60000\"   <span class=\"token comment\">&lt;!-- Keep-Alive 타임아웃 (기본값: connectionTimeout) --></span>\n\n           <span class=\"token comment\">&lt;!-- Keep-Alive --></span>\n           maxKeepAliveRequests=\"100\" <span class=\"token comment\">&lt;!-- 하나의 연결에서 최대 요청 수 (기본값: 100) --></span>\n\n           <span class=\"token comment\">&lt;!-- I/O --></span>\n           compression=\"on\"           <span class=\"token comment\">&lt;!-- 응답 압축 (기본값: off) --></span>\n           compressionMinSize=\"2048\"  <span class=\"token comment\">&lt;!-- 압축 최소 크기 (기본값: 2048) --></span>\n           /></code></pre></div>\n<p>Connector에서 <code class=\"language-text\">maxThreads</code>를 직접 설정하면 내장 ThreadPool을 사용하며, 이 경우 <code class=\"language-text\">maxQueueSize</code>는 <code class=\"language-text\">Integer.MAX_VALUE</code>(사실상 무제한)입니다. <code class=\"language-text\">maxQueueSize</code>를 제어하려면 별도 Executor를 정의해야 합니다.</p>\n<p>각 파라미터의 상세 동작 원리는 <a href=\"/tomcat-request-flow/\">Tomcat 요청 처리 흐름과 Thread 모델</a>에서 다룹니다.</p>\n<h2>Container 계층 구조</h2>\n<h3>Engine</h3>\n<p>가상 호스트로 요청을 라우팅합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Engine</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Catalina<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">defaultHost</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Host</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">appBase</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>webapps<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Host</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>www.example.com<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">appBase</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>webapps-example<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Engine</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>요청 처리 흐름</strong>:</p>\n<ol>\n<li>HTTP Host 헤더 확인: <code class=\"language-text\">Host: www.example.com</code></li>\n<li>매칭되는 Host 컴포넌트 선택</li>\n<li>매칭 실패 시 defaultHost 사용</li>\n</ol>\n<h3>Host</h3>\n<p>도메인별 웹 애플리케이션을 격리합니다.</p>\n<p><strong>요즘은 Engine/Host 설정을 직접 건드릴 일이 거의 없습니다.</strong> Nginx/LB가 앞단에서 도메인별로 다른 서버로 라우팅하고, 컨테이너 환경에서는 서버(또는 Pod) 하나당 Tomcat 하나를 띄우기 때문입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Host</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">appBase</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>webapps<span class=\"token punctuation\">\"</span></span>\n      <span class=\"token attr-name\">unpackWARs</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>      <span class=\"token attr-name\">&lt;!--</span> <span class=\"token attr-name\">WAR</span> <span class=\"token attr-name\">압축</span> <span class=\"token attr-name\">해제</span> <span class=\"token attr-name\">--</span><span class=\"token punctuation\">></span></span>\n      autoDeploy=\"true\"      <span class=\"token comment\">&lt;!-- 자동 배포 --></span>\n      deployOnStartup=\"true\" <span class=\"token comment\">&lt;!-- 시작 시 배포 --></span>\n      >\n\n  <span class=\"token comment\">&lt;!-- Valve: Host 레벨 필터 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Valve</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>org.apache.catalina.valves.AccessLogValve<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">directory</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logs<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">prefix</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>localhost_access_log<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">suffix</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.txt<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%h %l %u %t <span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span>%r<span class=\"token entity named-entity\" title=\"&quot;\">&amp;quot;</span> %s %b<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Host</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3>Context</h3>\n<p>웹 애플리케이션 단위입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- conf/Catalina/localhost/myapp.xml --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Context</span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/myapp<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">docBase</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/var/webapps/myapp<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token attr-name\">reloadable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n         <span class=\"token punctuation\">></span></span>\n\n  <span class=\"token comment\">&lt;!-- Context별 DataSource --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Resource</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc/mydb<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">auth</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Container<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>javax.sql.DataSource<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">maxTotal</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">maxIdle</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">driverClassName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.cj.jdbc.Driver<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">url</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/mydb<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Context</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>Spring Boot에서는</strong> embedded Tomcat을 사용하고 Context Path가 기본적으로 <code class=\"language-text\">/</code>(루트)입니다. 그래서 Controller에서 <code class=\"language-text\">/api/users</code>만 매핑하면 바로 <code class=\"language-text\">http://localhost:8080/api/users</code>가 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># 변경하고 싶다면</span>\n<span class=\"token key atrule\">server</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">servlet</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">context-path</span><span class=\"token punctuation\">:</span> /myapp  <span class=\"token comment\"># http://localhost:8080/myapp/api/users</span></code></pre></div>\n<h3>Wrapper</h3>\n<p>Servlet 인스턴스를 관리합니다. URL 패턴과 Servlet 클래스를 매핑합니다.</p>\n<h4>전통적인 Servlet 방식 (과거)</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Context: /myapp\n├── Wrapper: /hello  → HelloServlet\n├── Wrapper: /user   → UserServlet\n├── Wrapper: /order  → OrderServlet\n└── Wrapper: *.jsp   → JspServlet</code></pre></div>\n<p><code class=\"language-text\">web.xml</code>에서 URL마다 Servlet을 직접 매핑했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- web.xml --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>helloServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-class</span><span class=\"token punctuation\">></span></span>com.example.HelloServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-class</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-mapping</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>helloServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url-pattern</span><span class=\"token punctuation\">></span></span>/hello<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url-pattern</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-mapping</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>userServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-class</span><span class=\"token punctuation\">></span></span>com.example.UserServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-class</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-mapping</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>servlet-name</span><span class=\"token punctuation\">></span></span>userServlet<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-name</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>url-pattern</span><span class=\"token punctuation\">></span></span>/user<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>url-pattern</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>servlet-mapping</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h4>Spring MVC 방식 (현재)</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Context: /\n└── Wrapper: /  → DispatcherServlet (단 하나)\n                    ├── /hello  → HelloController\n                    ├── /user   → UserController\n                    └── /order  → OrderController</code></pre></div>\n<p><strong>Servlet은 DispatcherServlet 하나만 존재</strong>합니다. URL → Controller 매핑은 Tomcat이 아닌 Spring이 처리합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Spring이 내부적으로 URL 매핑 관리</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// Spring의 HandlerMapping이 처리</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token string\">\"Hello\"</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user/{id}\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// Spring의 HandlerMapping이 처리</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">User</span> <span class=\"token function\">getUser</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>비교</h4>\n<table>\n<thead>\n<tr>\n<th>구분</th>\n<th>전통 Servlet</th>\n<th>Spring MVC</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Servlet 수</td>\n<td>URL당 1개</td>\n<td><strong>전체 1개</strong> (DispatcherServlet)</td>\n</tr>\n<tr>\n<td>URL 매핑</td>\n<td>Tomcat(Wrapper)이 처리</td>\n<td><strong>Spring</strong>(HandlerMapping)이 처리</td>\n</tr>\n<tr>\n<td>설정 방식</td>\n<td>web.xml</td>\n<td>@Controller + @RequestMapping</td>\n</tr>\n<tr>\n<td>요청 흐름</td>\n<td>Tomcat → Servlet</td>\n<td>Tomcat → DispatcherServlet → Controller</td>\n</tr>\n</tbody>\n</table>\n<p><strong>왜 바뀌었는가?</strong></p>\n<p>전통 방식은 Servlet마다 공통 로직(인증, 로깅, 예외처리)을 중복 구현해야 했습니다. Spring MVC는 DispatcherServlet이 모든 요청을 받아서 공통 처리 후 적절한 Controller로 위임합니다.</p>\n<p><strong>Servlet 생명주기</strong>:</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyServlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServletConfig</span> config<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ServletException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 1. 초기화 (서버 시작 시 또는 첫 요청 시)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 2. 서비스 (요청마다 호출)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 3. 소멸 (서버 종료 시)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>주의</strong>: Servlet은 기본적으로 <strong>싱글톤</strong>입니다. 멀티 스레드 환경에서 동일 인스턴스를 공유하므로 Thread-Safe하게 작성해야 합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 잘못된 예: 인스턴스 변수 사용</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">BadServlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 여러 스레드가 공유 - Race Condition</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 동시성 이슈</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 올바른 예: 로컬 변수 사용</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">GoodServlet</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">HttpServlet</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">void</span> <span class=\"token function\">doGet</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> resp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span> count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 각 스레드마다 독립적</span>\n        count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>ClassLoader 계층 구조</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Bootstrap ClassLoader (JRE)\n    ↓\nSystem ClassLoader (CLASSPATH)\n    ↓\nCommon ClassLoader (tomcat/lib/*.jar)\n    ↓\nWebApp ClassLoader (/WEB-INF/lib/*.jar, /WEB-INF/classes)</code></pre></div>\n<h4>과거: 하나의 Tomcat에 여러 앱</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">webapps/app1\n├── WEB-INF/lib/jackson-2.13.jar   ← App1은 2.13 사용\n\nwebapps/app2\n├── WEB-INF/lib/jackson-2.15.jar   ← App2는 2.15 사용\n\n→ 같은 Tomcat에서 버전 충돌 없이 동작</code></pre></div>\n<p>ClassLoader 격리 덕분에 하나의 Tomcat에서 여러 앱이 서로 다른 라이브러리 버전을 사용할 수 있었습니다.</p>\n<h4>현재: 컨테이너당 앱 하나</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Pod1 (Tomcat + App1)\n├── jackson-2.13.jar\n\nPod2 (Tomcat + App2)\n├── jackson-2.15.jar\n\n→ 애초에 프로세스가 분리되어 ClassLoader 격리 불필요</code></pre></div>\n<p>컨테이너/Pod 환경에서는 앱마다 별도 Tomcat을 띄우므로 ClassLoader 격리 기능이 의미가 없어졌습니다. Spring Boot의 embedded Tomcat도 앱 하나만 실행하므로 마찬가지입니다.</p>\n<h2>요약</h2>\n<p><strong>핵심 포인트</strong></p>\n<ol>\n<li>Tomcat은 <strong>Coyote</strong>(Connector)와 <strong>Catalina</strong>(Container) 두 부분으로 구성됩니다.</li>\n<li><strong>NIO Connector</strong>가 Spring Boot 기본값이며 대부분의 경우 충분합니다.</li>\n<li><strong>maxConnections</strong>는 연결 수, <strong>maxThreads</strong>는 동시 처리 수를 의미합니다.</li>\n<li>Container 계층은 <strong>Engine → Host → Context → Wrapper</strong> 순서로 요청을 처리합니다.</li>\n<li>Servlet은 싱글톤이므로 <strong>Thread-Safe</strong>하게 작성해야 합니다.</li>\n</ol>\n<p>다음 포스트에서는 Tomcat의 요청 처리 흐름과 Thread 모델을 상세히 알아보겠습니다.</p>","wordCount":{"words":892},"frontmatter":{"title":"Tomcat 아키텍처","date":"December 12, 2025","description":"Tomcat의 핵심 컴포넌트 구조와 Connector, Container 계층을 상세히 알아봅니다."}},"previous":{"fields":{"slug":"/db-replication-consistency/"},"frontmatter":{"title":"Master-Slave DB 복제 환경에서의 일관성 관리"}},"next":{"fields":{"slug":"/tomcat-request-flow/"},"frontmatter":{"title":"Tomcat 요청 처리 흐름과 Thread 모델"}}},"pageContext":{"id":"cf002e08-7ae1-521d-ae4b-8132fdc3aff2","previousPostId":"95e30fc0-854e-58ee-8973-9a235ae408e8","nextPostId":"47a23bca-623c-5770-90cf-f7843bed9763"}},"staticQueryHashes":["3257411868","3517523002"],"slicesMap":{}}