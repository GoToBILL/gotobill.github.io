{"componentChunkName":"component---src-templates-blog-post-js","path":"/mysql-extra/","result":{"data":{"site":{"siteMetadata":{"title":"GoToBill"}},"markdownRemark":{"id":"daaba5ec-b28c-5b48-a042-e7b21f6d1ab4","excerpt":"이 글은 Real MySQL 8.0 책의 내용을 참고하여 작성되었습니다. Extra 컬럼이란? Extra 컬럼은 실행 계획에서 추가 정보를 제공하는 매우 중요한 컬럼입니다. 쿼리 최적화와 성능 개선에 핵심적인 정보를 담고 있습니다. 성능 관련 중요 메시지 요약 메시지 의미  Using…","html":"<blockquote>\n<p>이 글은 Real MySQL 8.0 책의 내용을 참고하여 작성되었습니다.</p>\n</blockquote>\n<h2>Extra 컬럼이란?</h2>\n<p>Extra 컬럼은 실행 계획에서 <strong>추가 정보를 제공</strong>하는 매우 중요한 컬럼입니다. 쿼리 최적화와 성능 개선에 핵심적인 정보를 담고 있습니다.</p>\n<hr>\n<h2>성능 관련 중요 메시지 요약</h2>\n<table>\n<thead>\n<tr>\n<th>메시지</th>\n<th>의미</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Using index</td>\n<td>커버링 인덱스 사용</td>\n<td></td>\n</tr>\n<tr>\n<td>Using index condition</td>\n<td>인덱스 컨디션 푸시다운</td>\n<td></td>\n</tr>\n<tr>\n<td>Using filesort</td>\n<td>인덱스 없이 정렬</td>\n<td></td>\n</tr>\n<tr>\n<td>Using temporary</td>\n<td>임시 테이블 사용</td>\n<td></td>\n</tr>\n<tr>\n<td>Using where</td>\n<td>WHERE 필터링</td>\n<td></td>\n</tr>\n<tr>\n<td>Using join buffer</td>\n<td>조인 버퍼 사용</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2>1. const row not found</h2>\n<p><strong>의미</strong>: const 접근 방법으로 테이블을 읽었지만 레코드가 1건도 없음</p>\n<p>테이블에 테스트 데이터를 저장하고 다시 실행 계획을 확인해 봐야함.</p>\n<hr>\n<h2>2. Deleting all rows</h2>\n<p><strong>의미</strong>: WHERE 조건 없이 테이블의 모든 레코드를 삭제</p>\n<p>MySQL 8.0에서는 더 이상 표시되지 않습니다. 전체 삭제는 <strong>TRUNCATE TABLE</strong> 사용을 권장합니다.</p>\n<hr>\n<h2>3. Distinct</h2>\n<p><strong>의미</strong>: DISTINCT 처리 시 조인하지 않아도 되는 항목은 무시</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> d<span class=\"token punctuation\">.</span>dept_no\n<span class=\"token keyword\">FROM</span> departments d<span class=\"token punctuation\">,</span> dept_emp de\n<span class=\"token keyword\">WHERE</span> de<span class=\"token punctuation\">.</span>dept_no<span class=\"token operator\">=</span>d<span class=\"token punctuation\">.</span>dept_no<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>d</td>\n<td>index</td>\n<td>Using index; Using temporary</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>de</td>\n<td>ref</td>\n<td>Using index; Distinct</td>\n</tr>\n</tbody>\n</table>\n<p>필요한 것만 조인하여 효율적으로 처리합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ea8b56c4061b13a4beddaa286540d94a/fcbaf/10.6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJklEQVR42l1RXauCUBD0//+HXsQ+LHrKHoQC9cHU1IRIgqK0MvRBMDUJwuayGzfubWHYc87uzgx7hLIskSQJTqcT4jhGnue43+94vV5omgZFUTAulwsOhwOu1yvqukZVVXg+n/gOQRRF9Pt9UJZlGZPJBIqiYL/fYz6fc208HmMwGECSJHS7XUynU4bv+8iyDOfzmXG73SB0Oh30er1P82g0wnA4xGw2g6qqsG0bpmkydF2HYRhYrVawLIsFwzBkYnpL0xTCYrHAcrnkBspUCIKA70TwS2boBotomob1es1CRBhFEa/s4/B7B7Q7it1ux4ObzYZBZ997Ozkej9hutyxE4o7jsBnar0AEf9G2LRPS57iuy40EGiLX5IxIPc/j/Hg8/hn5AeHqo2/lHplmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림 10.6\"\n        title=\"\"\n        src=\"/static/ea8b56c4061b13a4beddaa286540d94a/f058b/10.6.png\"\n        srcset=\"/static/ea8b56c4061b13a4beddaa286540d94a/c26ae/10.6.png 158w,\n/static/ea8b56c4061b13a4beddaa286540d94a/6bdcf/10.6.png 315w,\n/static/ea8b56c4061b13a4beddaa286540d94a/f058b/10.6.png 630w,\n/static/ea8b56c4061b13a4beddaa286540d94a/fcbaf/10.6.png 895w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<hr>\n<h2>4. FirstMatch / LooseScan / Start temporary, End temporary</h2>\n<p><strong>의미</strong>: 세미 조인 최적화 전략 사용</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- FirstMatch</span>\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> employees e\n<span class=\"token keyword\">WHERE</span> e<span class=\"token punctuation\">.</span>first_name<span class=\"token operator\">=</span><span class=\"token string\">'Matt'</span>\n  <span class=\"token operator\">AND</span> e<span class=\"token punctuation\">.</span>emp_no <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> t<span class=\"token punctuation\">.</span>emp_no <span class=\"token keyword\">FROM</span> titles t <span class=\"token keyword\">WHERE</span> t<span class=\"token punctuation\">.</span>from_date <span class=\"token operator\">BETWEEN</span> <span class=\"token string\">'1995-01-01'</span> <span class=\"token operator\">AND</span> <span class=\"token string\">'1995-01-30'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>table</th>\n<th>type</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>e</td>\n<td>ref</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>1</td>\n<td>t</td>\n<td>ref</td>\n<td>Using where; Using index; FirstMatch(e)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>세미 조인 최적화 종류</strong></p>\n<ul>\n<li><strong>FirstMatch</strong>: 첫 번째로 일치하는 한 건만 검색</li>\n<li><strong>LooseScan</strong>: 인덱스를 듬성듬성 읽어서 중복 제거</li>\n<li><strong>Duplicate Weed-out</strong>: 임시 테이블로 중복 제거 (Start temporary ~ End temporary)</li>\n</ul>\n<hr>\n<h2>5. Full scan on NULL key</h2>\n<p><strong>의미</strong>: <code class=\"language-text\">col1 IN (SELECT col2 FROM ...)</code> 형태에서 col1이 NULL일 때 서브쿼리를 풀 스캔</p>\n<p><strong>해결 방법</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> tb_test1\n<span class=\"token keyword\">WHERE</span> col1 <span class=\"token operator\">IS</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span>\n  <span class=\"token operator\">AND</span> col1 <span class=\"token operator\">IN</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> col2 <span class=\"token keyword\">FROM</span> tb_test2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2>6. Impossible HAVING / Impossible WHERE</h2>\n<p><strong>의미</strong>: 조건이 항상 FALSE</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- emp_no는 NOT NULL이므로 항상 FALSE</span>\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> employees <span class=\"token keyword\">WHERE</span> emp_no <span class=\"token operator\">IS</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>쿼리가 잘못 작성된 경우이므로 점검이 필요합니다.</p>\n<hr>\n<h2>7. No matching min/max row / no matching row in const table</h2>\n<p><strong>의미</strong>: 조건에 일치하는 레코드가 없음</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span>dept_no<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span>dept_no<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> dept_emp\n<span class=\"token keyword\">WHERE</span> dept_no<span class=\"token operator\">=</span><span class=\"token string\">''</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">-- 일치하는 레코드 없음</span></code></pre></div>\n<hr>\n<h2>8. No matching rows after partition pruning</h2>\n<p><strong>의미</strong>: 파티션 프루닝 후 대상 파티션이 없음</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- 최대 hire_date가 2000-01-28인 경우</span>\n<span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">DELETE</span> <span class=\"token keyword\">FROM</span> employees_parted <span class=\"token keyword\">WHERE</span> hire_date<span class=\"token operator\">>=</span><span class=\"token string\">'2020-01-01'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>2020년 이상의 파티션이 없으므로 삭제할 대상이 없습니다.</p>\n<hr>\n<h2>9. No tables used</h2>\n<p><strong>의미</strong>: FROM 절이 없거나 FROM DUAL 형태</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">SELECT</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">SELECT</span> <span class=\"token number\">1</span> <span class=\"token keyword\">FROM</span> dual<span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h2>10. Not exists</h2>\n<p><strong>의미</strong>: 안티 조인(Anti-JOIN)을 아우터 조인으로 최적화</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> dept_emp de\n    <span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> departments d <span class=\"token keyword\">ON</span> de<span class=\"token punctuation\">.</span>dept_no<span class=\"token operator\">=</span>d<span class=\"token punctuation\">.</span>dept_no\n<span class=\"token keyword\">WHERE</span> d<span class=\"token punctuation\">.</span>dept_no <span class=\"token operator\">IS</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>de</td>\n<td>ALL</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>d</td>\n<td>eq_ref</td>\n<td>Using where; Not exists</td>\n</tr>\n</tbody>\n</table>\n<p>조건에 일치하는 레코드 1건만 있어도 즉시 처리를 완료합니다.</p>\n<hr>\n<h2>11. Plan isn't ready yet</h2>\n<p><strong>의미</strong>: <code class=\"language-text\">EXPLAIN FOR CONNECTION</code> 실행 시 대상 커넥션이 아직 실행 계획을 수립하지 못한 상태</p>\n<p>시간을 두고 다시 실행하면 됩니다.</p>\n<hr>\n<h2>12. Range checked for each record</h2>\n<p><strong>의미</strong>: 레코드마다 인덱스 레인지 스캔을 체크</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> employees e1<span class=\"token punctuation\">,</span> employees e2\n<span class=\"token keyword\">WHERE</span> e2<span class=\"token punctuation\">.</span>emp_no <span class=\"token operator\">>=</span> e1<span class=\"token punctuation\">.</span>emp_no<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>e1</td>\n<td>ALL</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>e2</td>\n<td>ALL</td>\n<td>Range checked for each record (index map: 0x1)</td>\n</tr>\n</tbody>\n</table>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/42d731c337adeb2d2fb0e413cc715be2/41be6/10.7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB5UlEQVR42oVT16piQRD0/39AH0wo5ogBEXM4ZhHEHEAEE4iKD2ate6vleO8uCzvQ9Dk9NR2qZjT4Xs/nE/f7XezxeOB2u+H1ev1h6lL3iaWn/V4aBkajEcrlMqrVKlqtFpSigvF4/AGx4Hq9xmw2Q7PZRK1WE098vV6X+Gq1ksKa6XQKp9MJh8MBl8sl3mKxwGazYTKZYDgcotPpIBKJyD7joVAIbrcbfr9fsEajEe12W7rXNBoNSRIIBMTb7XYB8TsajSIcDstBFg0Gg/D5fGLcZ3KPxyPxXq/3HrlSqcBkMkkis9kMg8EAvV4vxkPshMlYhBir1SqeuEQiIV1ns1mZQhKSG3LI0QeDgbROPgng3na7xWKxEE7n87lQsFwukUqlBMfuMpkM+v3+O+HxeMThcMDpdMJms8F+vwdj/CYnXNfrFbvdDufzWbAkn2JwulKpJOJ0u913QqpFLlQjJxyDlkwmEYvFpAuv1ysxjsyYoigoFovCcy6X++GQ2bVarZhOpxMeyR+Vo7IUgIXII7mjxeNxpNNpGZmYfD7/0yF5o4o8SM+K7IhA9a4VCgURiNeFYhDHfSamaIzz/kpC/Gepr4TjUQh2RiqoLP8pCBNTrE/Cv5/Zv57d5XIRUX579ZumPsEvuG82ol8LiRUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림 10.7\"\n        title=\"\"\n        src=\"/static/42d731c337adeb2d2fb0e413cc715be2/f058b/10.7.png\"\n        srcset=\"/static/42d731c337adeb2d2fb0e413cc715be2/c26ae/10.7.png 158w,\n/static/42d731c337adeb2d2fb0e413cc715be2/6bdcf/10.7.png 315w,\n/static/42d731c337adeb2d2fb0e413cc715be2/f058b/10.7.png 630w,\n/static/42d731c337adeb2d2fb0e413cc715be2/41be6/10.7.png 638w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><strong>index map 해석</strong></p>\n<p><code class=\"language-text\">0x1</code> = 16진수 0x1 = 이진수 <code class=\"language-text\">00001</code></p>\n<ul>\n<li>첫 번째 인덱스(PRIMARY KEY)를 후보로 고려</li>\n</ul>\n<p><strong>index map 0x19 예시</strong></p>\n<p><code class=\"language-text\">0x19</code> = 16진수 0x19 = 이진수 <code class=\"language-text\">11001</code></p>\n<table>\n<thead>\n<tr>\n<th>비트 위치</th>\n<th>5</th>\n<th>4</th>\n<th>3</th>\n<th>2</th>\n<th>1</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>비트 값</td>\n<td>1</td>\n<td>1</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>인덱스</td>\n<td>5번째</td>\n<td>4번째</td>\n<td>3번째</td>\n<td>2번째</td>\n<td>PRIMARY KEY</td>\n</tr>\n</tbody>\n</table>\n<p>비트 값이 1인 인덱스가 후보입니다.</p>\n<hr>\n<h2>13. Recursive</h2>\n<p><strong>의미</strong>: CTE(Common Table Expression)를 이용한 재귀 쿼리</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">WITH</span> RECURSIVE cte <span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span>\n<span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">SELECT</span> <span class=\"token number\">1</span>\n    <span class=\"token keyword\">UNION</span> <span class=\"token keyword\">ALL</span>\n    <span class=\"token keyword\">SELECT</span> n <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token keyword\">FROM</span> cte <span class=\"token keyword\">WHERE</span> n <span class=\"token operator\">&lt;</span> <span class=\"token number\">5</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> cte<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>PRIMARY</td>\n<td><code class=\"language-text\">&lt;derived2></code></td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>2</td>\n<td>DERIVED</td>\n<td>NULL</td>\n<td>No tables used</td>\n</tr>\n<tr>\n<td>3</td>\n<td>UNION</td>\n<td>cte</td>\n<td>Recursive; Using where</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h2>14. Rematerialize</h2>\n<p><strong>의미</strong>: 래터럴 조인(LATERAL JOIN)에서 선행 테이블의 레코드별로 임시 테이블 재생성</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> employees e\n    <span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> LATERAL <span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n        <span class=\"token keyword\">FROM</span> salaries s\n        <span class=\"token keyword\">WHERE</span> s<span class=\"token punctuation\">.</span>emp_no<span class=\"token operator\">=</span>e<span class=\"token punctuation\">.</span>emp_no\n        <span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> s<span class=\"token punctuation\">.</span>from_date <span class=\"token keyword\">DESC</span> <span class=\"token keyword\">LIMIT</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">)</span> s2 <span class=\"token keyword\">ON</span> s2<span class=\"token punctuation\">.</span>emp_no<span class=\"token operator\">=</span>e<span class=\"token punctuation\">.</span>emp_no\n<span class=\"token keyword\">WHERE</span> e<span class=\"token punctuation\">.</span>first_name<span class=\"token operator\">=</span><span class=\"token string\">'Matt'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>employees 테이블의 레코드마다 임시 테이블이 새로 생성됩니다.</p>\n<hr>\n<h2>15. Select tables optimized away</h2>\n<p><strong>의미</strong>: MIN() / MAX() 또는 COUNT(*)를 인덱스로 최적화</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span>emp_no<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span>emp_no<span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> employees<span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 408px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/59ba52b10036a0a1e0c5dfe9ee539db9/e7c18/10.8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACVklEQVR42q1U2U5iQRTk9yU+ABGUJUFAfRjjIxBIgChLQkDZd2SXRcANiVGWmtSZtAOROD7MTU66b98+darOcjXYeN7f3/H29oaPjw8sFgux5XIptlqtZF2v1/ju0agNnQuFAiKRiKzVahX1eh25XA43NzcoFotIpVJ4eXmR+wqY62YQjXrJ5/O4vLyEx+OB3+9HOBz+XGlXV1eIRqMS8Pn5eSfYFmA8Hofb7cbZ2RnOf53D6/Xi4uICgUAAwWAQPp8PoVBIgozH40+AwWCAh4eHbcn9fh+Hh4ewWqzQ6/XY39+XvU6ng9VqFTObzbDZbLKaTCYcHR3J+8HBAbRaLRqNxl9AJjydTkueKImMuI/FYiiXy6hUKpLXWq0m95rNJh4fHzGZTJDNZuUOa7AlmSxZZTqxEKx2t9uVM9psNpPAlPf09PTvHLbbbYlKsEQigel0KuB0ppHN6+urBFY5YwD6c/0C2Gq1xInSrq+vJfGUSmfa/f29tEyv15PAm62zk2Gn05GLyWRS2ocA7EPFkAEUwx8BUjJlssdoZEOGdKYRkHm8u7v7GSAlj0YjcSBbymelCURTzNqd9s8lE5ANzomgZBZFMeS7YqiKoqq8c/TYIooVi0KA29vbzxTw23w+l8n4niH+HLLTu70ukomkzC2bt1QuCWsaAzLHTA1TsNm/PP8yehaLBQ6HQ8bKYDDg+PhY9i6XCycnJ3A6nTg9PYXdbofRaJRxVKO3t7e3PXr8zzFf7EE2diaTEekcs1KpJKOlVp4Ph0ORzVzyL0VfYmz9D//X8xt1Wyy0SjQadQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림 10.8\"\n        title=\"\"\n        src=\"/static/59ba52b10036a0a1e0c5dfe9ee539db9/e7c18/10.8.png\"\n        srcset=\"/static/59ba52b10036a0a1e0c5dfe9ee539db9/c26ae/10.8.png 158w,\n/static/59ba52b10036a0a1e0c5dfe9ee539db9/6bdcf/10.8.png 315w,\n/static/59ba52b10036a0a1e0c5dfe9ee539db9/e7c18/10.8.png 408w\"\n        sizes=\"(max-width: 408px) 100vw, 408px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span>from_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span>from_date<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> salaries\n<span class=\"token keyword\">WHERE</span> emp_no<span class=\"token operator\">=</span><span class=\"token number\">10002</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 492px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/67fe17db9cc72898ad2e974aa184d7c0/5c6e9/10.9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.44303797468356%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACOklEQVR42o2UWU8qURCE/f+/Ah4IBohsAgFBeCAggkBYlFXZQUTWBJStb75OBq/mGu4knXNgTld3VdeZC/nxbLdb2Ww2uhL7/f4Uh8NBzj0Xxma322lSv9+X+/t7qVQq0m63pdvtSrPZlGq1Kq+vr/L5+annfgU8Ho+6abVaYjabxWKxiMPh0GBvMpnEarXq7+vra7m6utKiPEbuPwGHw6FkH7ISi8WkUChIKpWSu7s7XTOZjORyOe308fFRxuPxecD393ell06nZTQaKcWnpyel3mw09d1qtdJz0+n0POXJZKJUyuWyAjYaDZWBAIxYLpd67r8AEbxUKsnt7a12R6fRaFQpZ7NZpdrpdJT229ub5hiTB8NYT4BUBZREaD0/PyswIHRO1x8fH9rlbDY7b5tisagD8bg9Eo/HJRgMSiAQkFAoJJFIRN8xnGQyqd2jLYE02IxYr9dfgCTYbLaTRXS1OzTsdrtcXl6K1+sVp9MpHo9Hbm5uJBwOazGshKXo/kQZSlT2+XxqEbrkMCvV6a5WqymTn7Yx9Ps2FA6RQDLC5/N5BcY66Ao9inJ70PhXHxobpulyufR2QM2gCX0oQRU9/X6/Tp+OCQojF2wWi8UXIGJDl2SSAHe73QqOPqwAoR2RSCQ0yKMQen7TEBovLy96oNfrKVX0gip73s3nc7WWYWwj92/qJ0DMym3AxPgOPQGq1+sKhnZ0wDluizEMYyBGnCjjIaoPBgMdEAPgg0Gw5z9YAIjBfzP2HzL51hUEYsgwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"그림 10.9\"\n        title=\"\"\n        src=\"/static/67fe17db9cc72898ad2e974aa184d7c0/5c6e9/10.9.png\"\n        srcset=\"/static/67fe17db9cc72898ad2e974aa184d7c0/c26ae/10.9.png 158w,\n/static/67fe17db9cc72898ad2e974aa184d7c0/6bdcf/10.9.png 315w,\n/static/67fe17db9cc72898ad2e974aa184d7c0/5c6e9/10.9.png 492w\"\n        sizes=\"(max-width: 492px) 100vw, 492px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>NULL</td>\n<td>Select tables optimized away</td>\n</tr>\n</tbody>\n</table>\n<p>인덱스의 첫 번째와 마지막 레코드만 읽어서 처리합니다.</p>\n<hr>\n<h2>16. unique row not found</h2>\n<p><strong>의미</strong>: 아우터 조인에서 아우터 테이블에 일치하는 레코드가 없음</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> tb_test1 <span class=\"token punctuation\">(</span>fdpk <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>fdpk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> tb_test2 <span class=\"token punctuation\">(</span>fdpk <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span><span class=\"token punctuation\">(</span>fdpk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> tb_test1 <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> tb_test2 <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> t1<span class=\"token punctuation\">.</span>fdpk\n<span class=\"token keyword\">FROM</span> tb_test1 t1\n    <span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> tb_test2 t2 <span class=\"token keyword\">ON</span> t2<span class=\"token punctuation\">.</span>fdpk<span class=\"token operator\">=</span>t1<span class=\"token punctuation\">.</span>fdpk\n<span class=\"token keyword\">WHERE</span> t1<span class=\"token punctuation\">.</span>fdpk<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>tb_test2 테이블에 fdpk=2인 레코드가 없습니다.</p>\n<hr>\n<h2>17. Using filesort</h2>\n<p><strong>의미</strong>: ORDER BY를 인덱스로 처리하지 못하고 정렬 수행</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> last_name <span class=\"token keyword\">DESC</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>rows</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees</td>\n<td>ALL</td>\n<td>300363</td>\n<td>Using filesort</td>\n</tr>\n</tbody>\n</table>\n<p><strong>성능 영향</strong></p>\n<ul>\n<li>정렬용 메모리 버퍼 사용 (Sort buffer)</li>\n<li>퀵 소트 또는 힙 소트 알고리즘 수행</li>\n<li><strong>많은 부하를 일으키므로 튜닝이 필수</strong></li>\n</ul>\n<p><strong>개선 방법</strong></p>\n<ul>\n<li>ORDER BY에 사용되는 컬럼에 인덱스 생성</li>\n</ul>\n<hr>\n<h2>18. Using index (커버링 인덱스)</h2>\n<p><strong>의미</strong>: 데이터 파일을 읽지 않고 인덱스만으로 쿼리 처리</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- 비효율적: 데이터 파일까지 읽어야 함</span>\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> first_name<span class=\"token punctuation\">,</span> birth_date\n<span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">WHERE</span> first_name <span class=\"token operator\">BETWEEN</span> <span class=\"token string\">'Babette'</span> <span class=\"token operator\">AND</span> <span class=\"token string\">'Gad'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>rows</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees</td>\n<td>ALL</td>\n<td>300473</td>\n<td>Using where</td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- 효율적: 인덱스만으로 처리</span>\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> first_name\n<span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">WHERE</span> first_name <span class=\"token operator\">BETWEEN</span> <span class=\"token string\">'Babette'</span> <span class=\"token operator\">AND</span> <span class=\"token string\">'Gad'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees</td>\n<td>range</td>\n<td>ix_firstname</td>\n<td>Using where; Using index</td>\n</tr>\n</tbody>\n</table>\n<p><strong>장점</strong></p>\n<ul>\n<li>데이터 파일 I/O 없음</li>\n<li>매우 빠른 처리 속도</li>\n<li><strong>가장 이상적인 상태</strong></li>\n</ul>\n<p><strong>InnoDB의 커버링 인덱스 특징</strong></p>\n<p>InnoDB의 세컨더리 인덱스는 프라이머리 키를 포함하므로 커버링 인덱스 활용 가능성이 높습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- first_name 인덱스에 emp_no(PK)도 포함됨</span>\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> emp_no<span class=\"token punctuation\">,</span> first_name\n<span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">WHERE</span> first_name <span class=\"token operator\">BETWEEN</span> <span class=\"token string\">'Babette'</span> <span class=\"token operator\">AND</span> <span class=\"token string\">'Gad'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees</td>\n<td>range</td>\n<td>ix_firstname</td>\n<td>Using where; Using index</td>\n</tr>\n</tbody>\n</table>\n<p><strong>주의사항</strong></p>\n<ul>\n<li>무조건 커버링 인덱스로 만들려고 인덱스에 많은 컬럼을 추가하면 위험합니다</li>\n<li>인덱스 크기 증가 → 메모리 낭비 → INSERT/UPDATE 성능 저하</li>\n</ul>\n<p><strong>혼동 주의</strong></p>\n<ul>\n<li><strong>Extra의 \"Using index\"</strong>: 커버링 인덱스 (좋음)</li>\n<li><strong>type의 \"index\"</strong>: 인덱스 풀 스캔 (느림)</li>\n</ul>\n<hr>\n<h2>19. Using index condition</h2>\n<p><strong>의미</strong>: 인덱스 컨디션 푸시다운(ICP) 최적화 사용</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- 인덱스: ix_lastname_firstname (last_name, first_name)</span>\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">WHERE</span> last_name<span class=\"token operator\">=</span><span class=\"token string\">'Acton'</span> <span class=\"token operator\">AND</span> first_name <span class=\"token operator\">LIKE</span> <span class=\"token string\">'%sal'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees</td>\n<td>ref</td>\n<td>ix_lastname_firstname</td>\n<td>Using index condition</td>\n</tr>\n</tbody>\n</table>\n<h3>ICP가 없을 때의 문제점</h3>\n<p>인덱스에 <code class=\"language-text\">(last_name, first_name)</code> 두 컬럼이 모두 포함되어 있지만, 기존 방식에서는 비효율적으로 동작합니다.</p>\n<p><strong>기존 방식 (ICP 없이)</strong></p>\n<ol>\n<li>\n<p>스토리지 엔진 (InnoDB):</p>\n<ul>\n<li>인덱스에서 <code class=\"language-text\">last_name='Acton'</code> 조건만 확인</li>\n<li>매칭되는 100건 발견</li>\n<li>100건 모두 실제 테이블에서 전체 row 읽기</li>\n</ul>\n</li>\n<li>\n<p>MySQL 엔진:</p>\n<ul>\n<li>100건을 받아서 <code class=\"language-text\">first_name LIKE '%sal'</code> 체크</li>\n<li>실제로는 3건만 조건에 맞음</li>\n<li><strong>97건은 쓸데없이 읽은 것</strong></li>\n</ul>\n</li>\n</ol>\n<h3>ICP 적용 후</h3>\n<p><strong>Index Condition Pushdown 방식</strong></p>\n<ol>\n<li>\n<p>MySQL 엔진:</p>\n<ul>\n<li>\"스토리지 엔진, <code class=\"language-text\">first_name LIKE '%sal'</code> 조건도 인덱스에서 체크할 수 있으니 너가 미리 확인해!\"</li>\n</ul>\n</li>\n<li>\n<p>스토리지 엔진 (InnoDB):</p>\n<ul>\n<li>인덱스에서 <code class=\"language-text\">last_name='Acton'</code> 확인</li>\n<li>인덱스에 <code class=\"language-text\">first_name</code>도 있으니 여기서 바로 체크</li>\n<li><code class=\"language-text\">first_name LIKE '%sal'</code>도 확인</li>\n<li><strong>3건만 조건 만족 → 이 3건만 테이블에서 읽기</strong></li>\n</ul>\n</li>\n<li>\n<p>MySQL 엔진:</p>\n<ul>\n<li>3건만 받음 (97건 안 읽음)</li>\n</ul>\n</li>\n</ol>\n<p><strong>성능 개선</strong></p>\n<ul>\n<li>불필요한 테이블 접근 97건 제거</li>\n<li>인덱스에 포함된 컬럼은 최대한 활용하여 필터링</li>\n</ul>\n<hr>\n<h2>20. Using index for group-by</h2>\n<p><strong>의미</strong>: GROUP BY 처리를 인덱스로 최적화 (루스 인덱스 스캔)</p>\n<h3>타이트 인덱스 스캔 (Using index for group-by 없음)</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> first_name<span class=\"token punctuation\">,</span> <span class=\"token function\">COUNT</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> counter\n<span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> first_name<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees</td>\n<td>index</td>\n<td>ix_firstname</td>\n<td>Using index</td>\n</tr>\n</tbody>\n</table>\n<p>AVG(), SUM(), COUNT()처럼 모든 인덱스를 읽어야 하면 듬성듬성 읽을 수 없습니다.</p>\n<h3>루스 인덱스 스캔 (Using index for group-by 표시)</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> emp_no<span class=\"token punctuation\">,</span> <span class=\"token function\">MIN</span><span class=\"token punctuation\">(</span>from_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">MAX</span><span class=\"token punctuation\">(</span>from_date<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> salaries\n<span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> emp_no<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>salaries</td>\n<td>range</td>\n<td>PRIMARY</td>\n<td>Using index for group-by</td>\n</tr>\n</tbody>\n</table>\n<p>MIN()/MAX()처럼 첫 번째/마지막 레코드만 읽으면 되는 경우 루스 인덱스 스캔을 사용합니다.</p>\n<p><strong>루스 인덱스 스캔 사용 조건</strong></p>\n<ul>\n<li>WHERE 조건이 없거나</li>\n<li>WHERE 조건과 GROUP BY가 같은 인덱스를 사용할 수 있어야 함</li>\n</ul>\n<hr>\n<h2>21. Using index for skip scan</h2>\n<p><strong>의미</strong>: 인덱스 스킵 스캔 최적화 사용 (MySQL 8.0+)</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> employees\n<span class=\"token keyword\">ADD</span> <span class=\"token keyword\">INDEX</span> ix_gender_birthdate <span class=\"token punctuation\">(</span>gender<span class=\"token punctuation\">,</span> birth_date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> gender<span class=\"token punctuation\">,</span> birth_date\n<span class=\"token keyword\">FROM</span> employees\n<span class=\"token keyword\">WHERE</span> birth_date<span class=\"token operator\">>=</span><span class=\"token string\">'1965-02-01'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>employees</td>\n<td>range</td>\n<td>ix_gender_birthdate</td>\n<td>Using where; Using index for skip scan</td>\n</tr>\n</tbody>\n</table>\n<p>인덱스의 첫 번째 컬럼(gender)을 건너뛰고 두 번째 컬럼(birth_date)만으로 검색할 수 있습니다.</p>\n<hr>\n<h2><a href=\"mysql-extra-part2\">2편에서 계속...</a></h2>\n<p>2편에서는 다음 내용을 다룹니다:</p>\n<ul>\n<li>Using join buffer (Block Nested Loop, Batched Key Access, hash join)</li>\n<li>Using MRR</li>\n<li>Using sort_union / Using union / Using intersect</li>\n<li>Using temporary</li>\n<li>Using where</li>\n<li>Zero limit</li>\n</ul>\n<hr>\n<h2>튜닝 체크리스트</h2>\n<p>쿼리 튜닝 시 Extra 컬럼에서 확인할 항목:</p>\n<ol>\n<li><strong>Using filesort</strong>: 인덱스로 정렬 가능한가?</li>\n<li><strong>Using temporary</strong>: GROUP BY/ORDER BY를 인덱스로 처리 가능한가?</li>\n<li><strong>Using index</strong>: 커버링 인덱스 적용 가능한가?</li>\n<li><strong>Using where + type: ALL</strong>: 인덱스 추가가 필요한가?</li>\n<li><strong>Using index condition</strong>: ICP 최적화가 적용됐는가?</li>\n</ol>","wordCount":{"words":1053},"frontmatter":{"title":"MySQL 실행 계획 - Extra 컬럼 (1편)","date":"October 27, 2025","description":"MySQL 실행 계획의 Extra 컬럼에 표시되는 주요 메시지들과 성능 최적화 방법을 알아봅니다."}},"previous":{"fields":{"slug":"/mysql-extra-part2/"},"frontmatter":{"title":"MySQL 실행 계획 - Extra 컬럼 (2편)"}},"next":{"fields":{"slug":"/db-cache-consistency/"},"frontmatter":{"title":"DB와 Cache 사이의 일관성 관리 전략"}}},"pageContext":{"id":"daaba5ec-b28c-5b48-a042-e7b21f6d1ab4","previousPostId":"3f933b63-ddc6-5345-af67-76703c1284e7","nextPostId":"27682fe2-7c54-51f4-ab5c-0d9651209b5f"}},"staticQueryHashes":["3257411868","3517523002"],"slicesMap":{}}