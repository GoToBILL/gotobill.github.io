{"componentChunkName":"component---src-templates-blog-post-js","path":"/mysql-table/","result":{"data":{"site":{"siteMetadata":{"title":"GoToBill"}},"markdownRemark":{"id":"94f50ada-9227-5800-ac3d-c97c790b831a","excerpt":"이 글은 Real MySQL 8.0 책의 내용을 참고하여 작성되었습니다. table 컬럼 MySQL 실행 계획은 단위 SELECT 쿼리가 아닌 테이블 기준으로 표시됩니다. 테이블에 별칭이 있으면 별칭이 표시됩니다. 테이블을 사용하지 않는 쿼리 id select_type table key…","html":"<blockquote>\n<p>이 글은 Real MySQL 8.0 책의 내용을 참고하여 작성되었습니다.</p>\n</blockquote>\n<h2>table 컬럼</h2>\n<p>MySQL 실행 계획은 단위 SELECT 쿼리가 아닌 <strong>테이블 기준</strong>으로 표시됩니다. 테이블에 별칭이 있으면 별칭이 표시됩니다.</p>\n<h3>테이블을 사용하지 않는 쿼리</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">SELECT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">SELECT</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> DUAL<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>key</th>\n<th>key_len</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>NULL</td>\n<td>NULL</td>\n<td>NULL</td>\n<td>No tables used</td>\n</tr>\n</tbody>\n</table>\n<p><strong>DUAL 테이블</strong></p>\n<ul>\n<li>Oracle RDBMS 호환성을 위해 MySQL이 내부적으로 지원합니다</li>\n<li><code class=\"language-text\">FROM DUAL</code>은 자동으로 제거되어 첫 번째 쿼리와 동일하게 처리됩니다</li>\n<li>별도의 테이블을 사용하지 않으면 table 컬럼에 <strong>NULL</strong>이 표시됩니다</li>\n</ul>\n<p><strong>주의사항</strong></p>\n<p>실제로 \"dual\"이라는 이름의 테이블을 생성하려면 백틱으로 감싸야 합니다. 하지만 예약어이므로 사용하지 않는 것이 좋습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>dual<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span>id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>dual<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>dual<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>임시 테이블 표시</h3>\n<p>table 컬럼에 <code class=\"language-text\">&lt;derived N></code> 또는 <code class=\"language-text\">&lt;union M,N></code> 형태로 표시되면 임시 테이블을 의미합니다. 숫자는 단위 SELECT 쿼리의 id 값입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span>\n    <span class=\"token punctuation\">(</span><span class=\"token keyword\">SELECT</span> de<span class=\"token punctuation\">.</span>emp_no <span class=\"token keyword\">FROM</span> dept_emp de <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> de<span class=\"token punctuation\">.</span>emp_no<span class=\"token punctuation\">)</span> tb<span class=\"token punctuation\">,</span>\n    employees e\n<span class=\"token keyword\">WHERE</span> e<span class=\"token punctuation\">.</span>emp_no <span class=\"token operator\">=</span> tb<span class=\"token punctuation\">.</span>emp_no<span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>type</th>\n<th>key</th>\n<th>rows</th>\n<th>Extra</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>PRIMARY</td>\n<td><code class=\"language-text\">&lt;derived2></code></td>\n<td>ALL</td>\n<td>NULL</td>\n<td>331143</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>1</td>\n<td>PRIMARY</td>\n<td>e</td>\n<td>eq_ref</td>\n<td>PRIMARY</td>\n<td>1</td>\n<td>NULL</td>\n</tr>\n<tr>\n<td>2</td>\n<td>DERIVED</td>\n<td>de</td>\n<td>index</td>\n<td>ix_empno_fromdate</td>\n<td>331143</td>\n<td>Using index</td>\n</tr>\n</tbody>\n</table>\n<p><strong>실행 계획 분석</strong></p>\n<ol>\n<li>첫 번째 라인의 <code class=\"language-text\">&lt;derived2></code>는 id=2인 라인이 먼저 실행되어야 함을 의미합니다</li>\n<li>세 번째 라인(id=2)은 DERIVED 타입으로 dept_emp 테이블에서 파생 테이블을 생성합니다</li>\n<li>첫 번째와 두 번째 라인은 id가 같으므로 조인 쿼리입니다</li>\n<li><code class=\"language-text\">&lt;derived2></code>가 먼저 표시되므로 드라이빙 테이블이고, e 테이블이 드리븐 테이블입니다</li>\n</ol>\n<h3>MATERIALIZED 서브쿼리</h3>\n<p>MySQL 8.0에서는 서브쿼리 최적화가 개선되었습니다. <strong>select_type이 MATERIALIZED</strong>인 경우 <code class=\"language-text\">&lt;subquery N></code> 형태로 표시됩니다.</p>\n<p>이는 서브쿼리 결과를 구체화(Materialization)해서 임시 테이블로 만든 것이며, <code class=\"language-text\">&lt;derived N></code>과 동일하게 해석하면 됩니다.</p>\n<hr>\n<h2>partitions 컬럼</h2>\n<p>MySQL 8.0부터는 <code class=\"language-text\">EXPLAIN</code> 명령으로 파티션 관련 실행 계획까지 모두 확인할 수 있습니다.</p>\n<h3>파티션 테이블 예시</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> employees_2 <span class=\"token punctuation\">(</span>\n    emp_no <span class=\"token keyword\">int</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    birth_date <span class=\"token keyword\">DATE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    first_name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    last_name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    gender <span class=\"token keyword\">ENUM</span><span class=\"token punctuation\">(</span><span class=\"token string\">'M'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'F'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    hire_date <span class=\"token keyword\">DATE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> <span class=\"token punctuation\">(</span>emp_no<span class=\"token punctuation\">,</span> hire_date<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">PARTITION</span> <span class=\"token keyword\">BY</span> RANGE <span class=\"token keyword\">COLUMNS</span><span class=\"token punctuation\">(</span>hire_date<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">PARTITION</span> p1986_1990 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'1990-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token keyword\">PARTITION</span> p1991_1995 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'1996-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token keyword\">PARTITION</span> p1996_2000 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2000-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token keyword\">PARTITION</span> p2001_2005 <span class=\"token keyword\">VALUES</span> LESS THAN <span class=\"token punctuation\">(</span><span class=\"token string\">'2006-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> employees_2 <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> employees<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>파티션 프루닝(Partition Pruning)</h3>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">EXPLAIN</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span>\n<span class=\"token keyword\">FROM</span> employees_2\n<span class=\"token keyword\">WHERE</span> hire_date <span class=\"token operator\">BETWEEN</span> <span class=\"token string\">'1999-11-15'</span> <span class=\"token operator\">AND</span> <span class=\"token string\">'2000-01-15'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th>id</th>\n<th>select_type</th>\n<th>table</th>\n<th>partitions</th>\n<th>type</th>\n<th>rows</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>SIMPLE</td>\n<td>employees_2</td>\n<td>p1996_2000,p2001_2005</td>\n<td>ALL</td>\n<td>21743</td>\n</tr>\n</tbody>\n</table>\n<p><strong>파티션 프루닝이란?</strong></p>\n<p>옵티마이저가 WHERE 조건을 분석하여 필요한 파티션만 골라내는 과정입니다. <strong>위 쿼리는 4개 파티션 중 2개만 접근합니다.</strong></p>\n<p><strong>type이 ALL인데 일부만 읽는 이유</strong></p>\n<p>파티션은 물리적으로 개별 테이블처럼 별도의 저장 공간을 가집니다.</p>\n<p>따라서 전체 테이블이 아닌 p1996_2000과 p2001_2005 파티션만 풀 스캔합니다.</p>","wordCount":{"words":271},"frontmatter":{"title":"MySQL 실행 계획 - table, partitions, type 컬럼","date":"October 24, 2025","description":"MySQL 실행 계획에서 table, partitions, type 컬럼을 이해하고 활용하는 방법을 알아봅니다."}},"previous":{"fields":{"slug":"/mysql-select-type/"},"frontmatter":{"title":"MySQL 실행 계획 - id와 select_type"}},"next":{"fields":{"slug":"/mysql-type/"},"frontmatter":{"title":"MySQL 실행 계획 - type 컬럼"}}},"pageContext":{"id":"94f50ada-9227-5800-ac3d-c97c790b831a","previousPostId":"cb47e515-3ee5-5d97-9ac4-0ac02482380b","nextPostId":"0be373a1-12aa-5f76-bf71-ee3d62c48bc3"}},"staticQueryHashes":["3257411868","3517523002"],"slicesMap":{}}